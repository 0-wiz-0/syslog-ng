#include "misc.h"
#include "apphook.h"
#include "timeutils.h"
#include "timeutils.h"
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

void
set_tz(const char *tz)
{
  static char envbuf[64];
  static int first = 1;

  snprintf(envbuf, sizeof(envbuf), "TZ=%s", tz);
  if (first)
    {
      putenv(envbuf);
      first = 0;
    }
  tzset();
  clean_time_cache();
}

void 
testcase(const gchar *zone, time_t utc, long expected_ofs)
{
  long ofs;
  
  set_tz(zone);
  
  ofs = get_local_timezone_ofs(utc);
  if (ofs != expected_ofs)
    {
      fprintf(stderr, "Timezone offset mismatch: zone: %s, %ld, expected %ld\n", zone, ofs, expected_ofs);
      exit(1);
    }
}

int
test_timezone_2(const time_t stamp_to_test, const char* time_zone)
{
  TimeZoneInfo *info;
  time_t offset, expected_offset;
  
  set_tz(time_zone);
  info = time_zone_info_new(time_zone);
  offset = time_zone_info_get_offset(info, stamp_to_test);
  expected_offset = get_local_timezone_ofs(stamp_to_test);
  if (offset != expected_offset)
    printf("unixtimestamp: %ld TimeZoneName (%s) localtime offset(%ld), timezone file offset(%ld)\n", (glong) stamp_to_test, time_zone, (glong) expected_offset, (glong) offset);
  time_zone_info_free(info);
  return offset == expected_offset;
}

int
test_timezone(const time_t stamp_to_test, const char* time_zone)
{
  return test_timezone_2(stamp_to_test, time_zone) &&
         test_timezone_2(stamp_to_test - 6*30*24*60*60, time_zone) &&
         test_timezone_2(stamp_to_test + 6*30*24*6, time_zone);
}

#define TEST_ASSERT(x)  \
  do { \
   if (!(x)) \
     { \
       fprintf(stderr, "test assertion failed: " #x " line: %d\n", __LINE__); \
       rc = 1; \
     } \
  } while (0)


int 
main(int argc, char *argv[])
{
  gint rc = 0;
  time_t now;
  
  app_startup();
  /* 2005-10-14 21:47:37 CEST, dst enabled */
  testcase("MET-1METDST", 1129319257, 7200);
  /* 2005-11-14 10:10:00 CET, dst disabled */
  testcase("MET-1METDST", 1131959400, 3600);

  /* 2005-10-14 21:47:37 GMT, no DST */
  testcase("GMT", 1129319257, 0);
  /* 2005-11-14 10:10:00 GMT, no DST */
  testcase("GMT", 1131959400, 0);

  /* 2005-04-03 01:30:00 ESD, DST disabled */
  testcase("EST5EDT", 1112509800, -5*3600);
  /* 2005-04-03 01:59:59 ESD, DST disabled */
  testcase("EST5EDT", 1112511599, -5*3600);
  /* 2005-04-03 03:00:00 EDT, DST enabled */
  testcase("EST5EDT", 1112511600, -4*3600);
  /* 2005-04-03 03:00:01 EDT, DST enabled */
  testcase("EST5EDT", 1112511601, -4*3600);
  /* 2005-10-30 01:59:59 EDT, DST enabled */
  testcase("EST5EDT", 1130651999, -4*3600);
  /* 2005-10-30 01:00:00 EST, DST disabled */
  testcase("EST5EDT", 1130652000, -5*3600);

#ifdef __linux__
  
  /* NOTE: not all of our build systems have been upgraded to work correctly
   * with post 2007 years. Therefore we restrict their tests to Linux which
   * work ok. */
  
  /* USA DST change in 2007, 2nd sunday of March instead of 1st Sunday of April */
  /* 2007-03-11 01:00:00 EST, DST disabled */
  testcase("EST5EDT", 1173592800, -5*3600);
  /* 2007-03-11 01:59:59 EST, DST disabled */
  testcase("EST5EDT", 1173596399, -5*3600);
  /* 2007-03-11 03:00:00 EST, DST enabled */
  testcase("EST5EDT", 1173596400, -4*3600);
  /* 2007-11-04 01:59:59 EST, DST enabled */
  testcase("EST5EDT", 1194155999, -4*3600);
  /* 2007-11-04 01:00:00 EST, DST disabled */
  testcase("EST5EDT", 1194156000, -5*3600);
#endif

#ifdef __linux__  
  /* Oct 31 01:59:59 2004 (EST) +1000 */
  testcase("Australia/Victoria", 1099151999, 10*3600);
  /* Oct 31 03:00:00 2004 (EST) +1100 */
  testcase("Australia/Victoria", 1099152000, 11*3600);
  /* Mar 27 02:59:59 2005 (EST) +1100 */
  testcase("Australia/Victoria", 1111852799, 11*3600);
  /* Mar 27 02:00:00 2005 (EST) +1000 */
  testcase("Australia/Victoria", 1111852800, 10*3600);

  /* Oct  2 01:59:59 2004 (NZT) +1200 */
  testcase("NZ", 1128175199, 12*3600);
  /* Oct  2 03:00:00 2004 (NZDT) +1300 */
  testcase("NZ", 1128175200, 13*3600);
  /* Mar 20 02:59:59 2005 (NZDT) +1300 */
  testcase("NZ", 1111240799, 13*3600);
  /* Mar 20 02:00:00 2005 (NZT) +1200 */
  testcase("NZ", 1111240800, 12*3600);

  now = time(NULL);

  TEST_ASSERT(test_timezone(now, "America/Louisville"));
  //TEST_ASSERT(test_timezone(now, "Hongkong"));
  TEST_ASSERT(test_timezone(now, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486800, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486860, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486740, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486800-1800, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486800+1800, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486800-3600, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486800+3600, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486800-3601, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(1288486800+3601, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(now, "Asia/Kuala_Lumpur"));
  TEST_ASSERT(test_timezone(now, "posix/Japan"));
  TEST_ASSERT(test_timezone(now, "CST6CDT"));
  TEST_ASSERT(test_timezone(now, "US/Pacific"));
  TEST_ASSERT(test_timezone(now, "US/Indiana-Starke"));
  TEST_ASSERT(test_timezone(now, "US/Samoa"));
  TEST_ASSERT(test_timezone(now, "US/Arizona"));
  TEST_ASSERT(test_timezone(now, "US/Aleutian"));
  TEST_ASSERT(test_timezone(now, "US/Michigan"));
  TEST_ASSERT(test_timezone(now, "US/Alaska"));
  TEST_ASSERT(test_timezone(now, "US/Central"));
  TEST_ASSERT(test_timezone(now, "US/Hawaii"));
  TEST_ASSERT(test_timezone(now, "US/East-Indiana"));
  TEST_ASSERT(test_timezone(now, "US/Eastern"));
  TEST_ASSERT(test_timezone(now, "US/Mountain"));
  TEST_ASSERT(test_timezone(now, "Pacific/Noumea"));
  TEST_ASSERT(test_timezone(now, "Pacific/Samoa"));
  TEST_ASSERT(test_timezone(now, "Pacific/Apia"));
  TEST_ASSERT(test_timezone(now, "Pacific/Auckland"));
  TEST_ASSERT(test_timezone(now, "Pacific/Fakaofo"));
  TEST_ASSERT(test_timezone(now, "Pacific/Saipan"));
  TEST_ASSERT(test_timezone(now, "Pacific/Easter"));
  TEST_ASSERT(test_timezone(now, "Pacific/Norfolk"));
  TEST_ASSERT(test_timezone(now, "Pacific/Kosrae"));
  TEST_ASSERT(test_timezone(now, "Pacific/Tarawa"));
  TEST_ASSERT(test_timezone(now, "Pacific/Tahiti"));
  TEST_ASSERT(test_timezone(now, "Pacific/Pago_Pago"));
  TEST_ASSERT(test_timezone(now, "Pacific/Majuro"));
  TEST_ASSERT(test_timezone(now, "Pacific/Guam"));
  TEST_ASSERT(test_timezone(now, "Pacific/Ponape"));
  TEST_ASSERT(test_timezone(now, "Pacific/Tongatapu"));
  TEST_ASSERT(test_timezone(now, "Pacific/Funafuti"));
  TEST_ASSERT(test_timezone(now, "Pacific/Wallis"));
  TEST_ASSERT(test_timezone(now, "Pacific/Efate"));
  TEST_ASSERT(test_timezone(now, "Pacific/Marquesas"));
  TEST_ASSERT(test_timezone(now, "Pacific/Enderbury"));
  TEST_ASSERT(test_timezone(now, "Pacific/Pitcairn"));
  TEST_ASSERT(test_timezone(now, "Pacific/Yap"));
  TEST_ASSERT(test_timezone(now, "Pacific/Wake"));
  TEST_ASSERT(test_timezone(now, "Pacific/Johnston"));
  TEST_ASSERT(test_timezone(now, "Pacific/Kwajalein"));
  TEST_ASSERT(test_timezone(now, "Pacific/Chatham"));
  TEST_ASSERT(test_timezone(now, "Pacific/Gambier"));
  TEST_ASSERT(test_timezone(now, "Pacific/Galapagos"));
  TEST_ASSERT(test_timezone(now, "Pacific/Kiritimati"));
  TEST_ASSERT(test_timezone(now, "Pacific/Honolulu"));
  TEST_ASSERT(test_timezone(now, "Pacific/Truk"));
  TEST_ASSERT(test_timezone(now, "Pacific/Midway"));
  TEST_ASSERT(test_timezone(now, "Pacific/Fiji"));
  TEST_ASSERT(test_timezone(now, "Pacific/Rarotonga"));
  TEST_ASSERT(test_timezone(now, "Pacific/Guadalcanal"));
  TEST_ASSERT(test_timezone(now, "Pacific/Nauru"));
  TEST_ASSERT(test_timezone(now, "Pacific/Palau"));
  TEST_ASSERT(test_timezone(now, "Pacific/Port_Moresby"));
  TEST_ASSERT(test_timezone(now, "Pacific/Niue"));
  TEST_ASSERT(test_timezone(now, "GMT"));
  TEST_ASSERT(test_timezone(now, "Hongkong"));
  TEST_ASSERT(test_timezone(now, "ROK"));
  TEST_ASSERT(test_timezone(now, "Navajo"));
  TEST_ASSERT(test_timezone(now, "ROC"));
  TEST_ASSERT(test_timezone(now, "WET"));
  TEST_ASSERT(test_timezone(now, "posixrules"));
  TEST_ASSERT(test_timezone(now, "CET"));
  TEST_ASSERT(test_timezone(now, "MET"));
  TEST_ASSERT(test_timezone(now, "MST"));
  TEST_ASSERT(test_timezone(now, "Turkey"));
  TEST_ASSERT(test_timezone(now, "Zulu"));
  TEST_ASSERT(test_timezone(now, "GMT+0"));
  TEST_ASSERT(test_timezone(now, "Canada/Saskatchewan"));
  TEST_ASSERT(test_timezone(now, "Canada/Pacific"));
  TEST_ASSERT(test_timezone(now, "Canada/Yukon"));
  TEST_ASSERT(test_timezone(now, "Canada/East-Saskatchewan"));
  TEST_ASSERT(test_timezone(now, "Canada/Newfoundland"));
  TEST_ASSERT(test_timezone(now, "Canada/Central"));
  TEST_ASSERT(test_timezone(now, "Canada/Eastern"));
  TEST_ASSERT(test_timezone(now, "Canada/Atlantic"));
  TEST_ASSERT(test_timezone(now, "Canada/Mountain"));
  TEST_ASSERT(test_timezone(now, "Singapore"));
  TEST_ASSERT(test_timezone(now, "UCT"));
  TEST_ASSERT(test_timezone(now, "Poland"));
  TEST_ASSERT(test_timezone(now, "Chile/Continental"));
  TEST_ASSERT(test_timezone(now, "Chile/EasterIsland"));
  TEST_ASSERT(test_timezone(now, "Portugal"));
  TEST_ASSERT(test_timezone(now, "Egypt"));
  TEST_ASSERT(test_timezone(now, "Japan"));
  TEST_ASSERT(test_timezone(now, "Iran"));
  TEST_ASSERT(test_timezone(now, "EET"));
  TEST_ASSERT(test_timezone(now, "Europe/Oslo"));
  TEST_ASSERT(test_timezone(now, "Europe/Bratislava"));
  TEST_ASSERT(test_timezone(now, "Europe/Gibraltar"));
  TEST_ASSERT(test_timezone(now, "Europe/Skopje"));
  TEST_ASSERT(test_timezone(now, "Europe/Simferopol"));
  TEST_ASSERT(test_timezone(now, "Europe/Zurich"));
  TEST_ASSERT(test_timezone(now, "Europe/Vienna"));
  TEST_ASSERT(test_timezone(now, "Europe/Paris"));
  TEST_ASSERT(test_timezone(now, "Europe/Jersey"));
  TEST_ASSERT(test_timezone(now, "Europe/Tallinn"));
  TEST_ASSERT(test_timezone(now, "Europe/Madrid"));
  TEST_ASSERT(test_timezone(now, "Europe/Volgograd"));
  TEST_ASSERT(test_timezone(now, "Europe/Zaporozhye"));
  TEST_ASSERT(test_timezone(now, "Europe/Mariehamn"));
  TEST_ASSERT(test_timezone(now, "Europe/Vaduz"));
  TEST_ASSERT(test_timezone(now, "Europe/Moscow"));
  TEST_ASSERT(test_timezone(now, "Europe/Stockholm"));
  TEST_ASSERT(test_timezone(now, "Europe/Minsk"));
  TEST_ASSERT(test_timezone(now, "Europe/Andorra"));
  TEST_ASSERT(test_timezone(now, "Europe/Istanbul"));
  TEST_ASSERT(test_timezone(now, "Europe/Tiraspol"));
  TEST_ASSERT(test_timezone(now, "Europe/Podgorica"));
  TEST_ASSERT(test_timezone(now, "Europe/Bucharest"));
  TEST_ASSERT(test_timezone(now, "Europe/Ljubljana"));
  TEST_ASSERT(test_timezone(now, "Europe/Brussels"));
  TEST_ASSERT(test_timezone(now, "Europe/Amsterdam"));
  TEST_ASSERT(test_timezone(now, "Europe/Riga"));
  TEST_ASSERT(test_timezone(now, "Europe/Tirane"));
  TEST_ASSERT(test_timezone(now, "Europe/Berlin"));
  TEST_ASSERT(test_timezone(now, "Europe/Guernsey"));
  TEST_ASSERT(test_timezone(now, "Europe/Warsaw"));
  TEST_ASSERT(test_timezone(now, "Europe/Vatican"));
  TEST_ASSERT(test_timezone(now, "Europe/Malta"));
  TEST_ASSERT(test_timezone(now, "Europe/Nicosia"));
  TEST_ASSERT(test_timezone(now, "Europe/Budapest"));
  TEST_ASSERT(test_timezone(now, "Europe/Kaliningrad"));
  TEST_ASSERT(test_timezone(now, "Europe/Sarajevo"));
  TEST_ASSERT(test_timezone(now, "Europe/Isle_of_Man"));
  TEST_ASSERT(test_timezone(now, "Europe/Rome"));
  TEST_ASSERT(test_timezone(now, "Europe/London"));
  TEST_ASSERT(test_timezone(now, "Europe/Vilnius"));
  TEST_ASSERT(test_timezone(now, "Europe/Samara"));
  TEST_ASSERT(test_timezone(now, "Europe/Belfast"));
  TEST_ASSERT(test_timezone(now, "Europe/Athens"));
  TEST_ASSERT(test_timezone(now, "Europe/Copenhagen"));
  TEST_ASSERT(test_timezone(now, "Europe/Belgrade"));
  TEST_ASSERT(test_timezone(now, "Europe/Sofia"));
  TEST_ASSERT(test_timezone(now, "Europe/San_Marino"));
  TEST_ASSERT(test_timezone(now, "Europe/Helsinki"));
  TEST_ASSERT(test_timezone(now, "Europe/Uzhgorod"));
  TEST_ASSERT(test_timezone(now, "Europe/Monaco"));
  TEST_ASSERT(test_timezone(now, "Europe/Prague"));
  TEST_ASSERT(test_timezone(now, "Europe/Zagreb"));
  TEST_ASSERT(test_timezone(now, "Europe/Lisbon"));
  TEST_ASSERT(test_timezone(now, "Europe/Chisinau"));
  TEST_ASSERT(test_timezone(now, "Europe/Dublin"));
  TEST_ASSERT(test_timezone(now, "Europe/Luxembourg"));
  TEST_ASSERT(test_timezone(now, "Europe/Kiev"));
  TEST_ASSERT(test_timezone(now, "Jamaica"));
  TEST_ASSERT(test_timezone(now, "Indian/Chagos"));
  TEST_ASSERT(test_timezone(now, "Indian/Comoro"));
  TEST_ASSERT(test_timezone(now, "Indian/Mauritius"));
  TEST_ASSERT(test_timezone(now, "Indian/Mayotte"));
  TEST_ASSERT(test_timezone(now, "Indian/Kerguelen"));
  TEST_ASSERT(test_timezone(now, "Indian/Maldives"));
  TEST_ASSERT(test_timezone(now, "Indian/Antananarivo"));
  TEST_ASSERT(test_timezone(now, "Indian/Mahe"));
  TEST_ASSERT(test_timezone(now, "Indian/Cocos"));
  TEST_ASSERT(test_timezone(now, "Indian/Christmas"));
  TEST_ASSERT(test_timezone(now, "Indian/Reunion"));
  TEST_ASSERT(test_timezone(now, "posix/CST6CDT"));
  TEST_ASSERT(test_timezone(now, "posix/US/Pacific"));
  TEST_ASSERT(test_timezone(now, "posix/US/Indiana-Starke"));
  TEST_ASSERT(test_timezone(now, "posix/US/Samoa"));
  TEST_ASSERT(test_timezone(now, "posix/US/Arizona"));
  TEST_ASSERT(test_timezone(now, "posix/US/Aleutian"));
  TEST_ASSERT(test_timezone(now, "posix/US/Michigan"));
  TEST_ASSERT(test_timezone(now, "posix/US/Alaska"));
  TEST_ASSERT(test_timezone(now, "posix/US/Central"));
  TEST_ASSERT(test_timezone(now, "posix/US/Hawaii"));
  TEST_ASSERT(test_timezone(now, "posix/US/East-Indiana"));
  TEST_ASSERT(test_timezone(now, "posix/US/Eastern"));
  TEST_ASSERT(test_timezone(now, "posix/US/Mountain"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Noumea"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Samoa"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Apia"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Auckland"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Fakaofo"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Saipan"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Easter"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Norfolk"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Kosrae"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Tarawa"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Tahiti"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Pago_Pago"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Majuro"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Guam"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Ponape"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Tongatapu"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Funafuti"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Wallis"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Efate"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Marquesas"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Enderbury"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Pitcairn"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Yap"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Wake"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Johnston"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Kwajalein"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Chatham"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Gambier"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Galapagos"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Kiritimati"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Honolulu"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Truk"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Midway"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Fiji"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Rarotonga"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Guadalcanal"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Nauru"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Palau"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Port_Moresby"));
  TEST_ASSERT(test_timezone(now, "posix/Pacific/Niue"));
  TEST_ASSERT(test_timezone(now, "posix/GMT"));
  TEST_ASSERT(test_timezone(now, "posix/Hongkong"));
  TEST_ASSERT(test_timezone(now, "posix/ROK"));
  TEST_ASSERT(test_timezone(now, "posix/Navajo"));
  TEST_ASSERT(test_timezone(now, "posix/ROC"));
  TEST_ASSERT(test_timezone(now, "posix/WET"));
  TEST_ASSERT(test_timezone(now, "posix/CET"));
  TEST_ASSERT(test_timezone(now, "posix/MET"));
  TEST_ASSERT(test_timezone(now, "posix/MST"));
  TEST_ASSERT(test_timezone(now, "posix/Turkey"));
  TEST_ASSERT(test_timezone(now, "posix/Zulu"));
  TEST_ASSERT(test_timezone(now, "posix/GMT+0"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/Saskatchewan"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/Pacific"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/Yukon"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/East-Saskatchewan"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/Newfoundland"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/Central"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/Eastern"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/Atlantic"));
  TEST_ASSERT(test_timezone(now, "posix/Canada/Mountain"));
  TEST_ASSERT(test_timezone(now, "posix/Singapore"));
  TEST_ASSERT(test_timezone(now, "posix/UCT"));
  TEST_ASSERT(test_timezone(now, "posix/Poland"));
  TEST_ASSERT(test_timezone(now, "posix/Chile/Continental"));
  TEST_ASSERT(test_timezone(now, "posix/Chile/EasterIsland"));
  TEST_ASSERT(test_timezone(now, "posix/Portugal"));
  TEST_ASSERT(test_timezone(now, "posix/Egypt"));
  TEST_ASSERT(test_timezone(now, "posix/Japan"));
  TEST_ASSERT(test_timezone(now, "posix/Iran"));
  TEST_ASSERT(test_timezone(now, "posix/EET"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Oslo"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Bratislava"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Gibraltar"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Skopje"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Simferopol"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Zurich"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Vienna"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Paris"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Jersey"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Tallinn"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Madrid"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Volgograd"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Zaporozhye"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Mariehamn"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Vaduz"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Moscow"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Stockholm"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Minsk"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Andorra"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Istanbul"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Tiraspol"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Podgorica"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Bucharest"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Ljubljana"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Brussels"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Amsterdam"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Riga"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Tirane"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Berlin"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Guernsey"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Warsaw"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Vatican"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Malta"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Nicosia"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Budapest"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Kaliningrad"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Sarajevo"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Isle_of_Man"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Rome"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/London"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Vilnius"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Samara"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Belfast"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Athens"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Copenhagen"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Belgrade"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Sofia"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/San_Marino"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Helsinki"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Uzhgorod"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Monaco"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Prague"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Zagreb"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Lisbon"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Chisinau"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Dublin"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Luxembourg"));
  TEST_ASSERT(test_timezone(now, "posix/Europe/Kiev"));
  TEST_ASSERT(test_timezone(now, "posix/Jamaica"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Chagos"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Comoro"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Mauritius"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Mayotte"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Kerguelen"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Maldives"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Antananarivo"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Mahe"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Cocos"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Christmas"));
  TEST_ASSERT(test_timezone(now, "posix/Indian/Reunion"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Accra"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Lubumbashi"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Bangui"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Asmara"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Freetown"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Mbabane"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Djibouti"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Ndjamena"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Porto-Novo"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Nouakchott"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Brazzaville"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Tunis"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Dar_es_Salaam"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Lusaka"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Banjul"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Sao_Tome"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Monrovia"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Lagos"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Conakry"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Tripoli"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Algiers"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Casablanca"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Lome"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Bamako"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Nairobi"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Douala"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Addis_Ababa"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/El_Aaiun"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Ceuta"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Harare"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Libreville"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Johannesburg"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Timbuktu"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Niamey"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Windhoek"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Bissau"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Maputo"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Kigali"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Dakar"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Ouagadougou"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Gaborone"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Khartoum"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Bujumbura"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Luanda"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Malabo"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Asmera"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Maseru"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Abidjan"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Kinshasa"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Blantyre"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Cairo"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Kampala"));
  TEST_ASSERT(test_timezone(now, "posix/Africa/Mogadishu"));
  TEST_ASSERT(test_timezone(now, "posix/Universal"));
  TEST_ASSERT(test_timezone(now, "posix/EST"));
  TEST_ASSERT(test_timezone(now, "posix/Greenwich"));
  TEST_ASSERT(test_timezone(now, "posix/Eire"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Qatar"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Makassar"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Colombo"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Chungking"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Macau"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Choibalsan"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Rangoon"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Harbin"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Yerevan"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Brunei"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Omsk"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Chongqing"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Tbilisi"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Tehran"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Manila"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Yakutsk"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Qyzylorda"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Dhaka"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Singapore"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Jakarta"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Novosibirsk"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Saigon"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Krasnoyarsk"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Kabul"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Bahrain"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Urumqi"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Thimbu"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Ulan_Bator"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Taipei"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Tashkent"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Dacca"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Aqtau"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Seoul"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Istanbul"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Tel_Aviv"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Almaty"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Phnom_Penh"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Baku"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Anadyr"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Aqtobe"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Kuwait"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Irkutsk"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Ulaanbaatar"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Tokyo"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Gaza"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Riyadh87"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Yekaterinburg"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Riyadh88"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Kolkata"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Nicosia"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Jayapura"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Shanghai"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Pyongyang"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Macao"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Dushanbe"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Kuching"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Vientiane"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Riyadh"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Dili"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Samarkand"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Ashkhabad"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Calcutta"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Hong_Kong"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Sakhalin"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Beirut"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Damascus"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Katmandu"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Jerusalem"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Riyadh89"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Vladivostok"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Kamchatka"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Dubai"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Kashgar"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Ashgabat"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Amman"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Karachi"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Bangkok"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Oral"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Thimphu"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Bishkek"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Baghdad"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Kuala_Lumpur"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Pontianak"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Ho_Chi_Minh"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Ujung_Pandang"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Muscat"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Aden"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Hovd"));
  TEST_ASSERT(test_timezone(now, "posix/Asia/Magadan"));
  TEST_ASSERT(test_timezone(now, "posix/EST5EDT"));
  TEST_ASSERT(test_timezone(now, "posix/PST8PDT"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Bermuda"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/St_Helena"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Cape_Verde"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Stanley"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Azores"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Jan_Mayen"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Reykjavik"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Madeira"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Canary"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Faeroe"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/Faroe"));
  TEST_ASSERT(test_timezone(now, "posix/Atlantic/South_Georgia"));
  TEST_ASSERT(test_timezone(now, "posix/Kwajalein"));
  TEST_ASSERT(test_timezone(now, "posix/UTC"));
  TEST_ASSERT(test_timezone(now, "posix/GMT-0"));
  TEST_ASSERT(test_timezone(now, "posix/MST7MDT"));
  TEST_ASSERT(test_timezone(now, "posix/GB-Eire"));
  TEST_ASSERT(test_timezone(now, "posix/PRC"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/CST6CDT"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/CST6"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/PST8"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/YST9"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/EST5"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/AST4"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/AST4ADT"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/YST9YDT"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/EST5EDT"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/PST8PDT"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/MST7MDT"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/HST10"));
  TEST_ASSERT(test_timezone(now, "posix/SystemV/MST7"));
  TEST_ASSERT(test_timezone(now, "posix/Arctic/Longyearbyen"));
  TEST_ASSERT(test_timezone(now, "posix/Cuba"));
  TEST_ASSERT(test_timezone(now, "posix/Israel"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-3"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+1"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-5"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-13"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-1"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-9"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/Zulu"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+0"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/UCT"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+12"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+9"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-6"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/Universal"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-2"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/Greenwich"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+3"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+8"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/UTC"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-0"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-14"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+10"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+4"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+5"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-12"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-8"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+7"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-11"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+6"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT0"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-7"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+11"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-4"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT+2"));
  TEST_ASSERT(test_timezone(now, "posix/Etc/GMT-10"));
  TEST_ASSERT(test_timezone(now, "posix/HST"));
  TEST_ASSERT(test_timezone(now, "posix/Iceland"));
  TEST_ASSERT(test_timezone(now, "posix/Mexico/BajaNorte"));
  TEST_ASSERT(test_timezone(now, "posix/Mexico/BajaSur"));
  TEST_ASSERT(test_timezone(now, "posix/Mexico/General"));
  TEST_ASSERT(test_timezone(now, "posix/Mideast/Riyadh87"));
  TEST_ASSERT(test_timezone(now, "posix/Mideast/Riyadh88"));
  TEST_ASSERT(test_timezone(now, "posix/Mideast/Riyadh89"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/Davis"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/DumontDUrville"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/Syowa"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/Palmer"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/Casey"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/Rothera"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/Mawson"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/McMurdo"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/South_Pole"));
  TEST_ASSERT(test_timezone(now, "posix/Antarctica/Vostok"));
  TEST_ASSERT(test_timezone(now, "posix/America/Curacao"));
  TEST_ASSERT(test_timezone(now, "posix/America/St_Lucia"));
  TEST_ASSERT(test_timezone(now, "posix/America/Managua"));
  TEST_ASSERT(test_timezone(now, "posix/America/Lima"));
  TEST_ASSERT(test_timezone(now, "posix/America/Nipigon"));
  TEST_ASSERT(test_timezone(now, "posix/America/Cayenne"));
  TEST_ASSERT(test_timezone(now, "posix/America/Detroit"));
  TEST_ASSERT(test_timezone(now, "posix/America/Kentucky/Louisville"));
  TEST_ASSERT(test_timezone(now, "posix/America/Kentucky/Monticello"));
  TEST_ASSERT(test_timezone(now, "posix/America/Belem"));
  TEST_ASSERT(test_timezone(now, "posix/America/Jujuy"));
  TEST_ASSERT(test_timezone(now, "posix/America/Godthab"));
  TEST_ASSERT(test_timezone(now, "posix/America/Guatemala"));
  TEST_ASSERT(test_timezone(now, "posix/America/Atka"));
  TEST_ASSERT(test_timezone(now, "posix/America/Montreal"));
  TEST_ASSERT(test_timezone(now, "posix/America/Resolute"));
  TEST_ASSERT(test_timezone(now, "posix/America/Thunder_Bay"));
  TEST_ASSERT(test_timezone(now, "posix/America/North_Dakota/New_Salem"));
  TEST_ASSERT(test_timezone(now, "posix/America/North_Dakota/Center"));
  TEST_ASSERT(test_timezone(now, "posix/America/Panama"));
  TEST_ASSERT(test_timezone(now, "posix/America/Los_Angeles"));
  TEST_ASSERT(test_timezone(now, "posix/America/Whitehorse"));
  TEST_ASSERT(test_timezone(now, "posix/America/Santiago"));
  TEST_ASSERT(test_timezone(now, "posix/America/Iqaluit"));
  TEST_ASSERT(test_timezone(now, "posix/America/Dawson"));
  TEST_ASSERT(test_timezone(now, "posix/America/Juneau"));
  TEST_ASSERT(test_timezone(now, "posix/America/Thule"));
  TEST_ASSERT(test_timezone(now, "posix/America/Fortaleza"));
  TEST_ASSERT(test_timezone(now, "posix/America/Montevideo"));
  TEST_ASSERT(test_timezone(now, "posix/America/Tegucigalpa"));
  TEST_ASSERT(test_timezone(now, "posix/America/Port-au-Prince"));
  TEST_ASSERT(test_timezone(now, "posix/America/Guadeloupe"));
  TEST_ASSERT(test_timezone(now, "posix/America/Coral_Harbour"));
  TEST_ASSERT(test_timezone(now, "posix/America/Monterrey"));
  TEST_ASSERT(test_timezone(now, "posix/America/Anguilla"));
  TEST_ASSERT(test_timezone(now, "posix/America/Antigua"));
  TEST_ASSERT(test_timezone(now, "posix/America/Campo_Grande"));
  TEST_ASSERT(test_timezone(now, "posix/America/Buenos_Aires"));
  TEST_ASSERT(test_timezone(now, "posix/America/Maceio"));
  TEST_ASSERT(test_timezone(now, "posix/America/New_York"));
  TEST_ASSERT(test_timezone(now, "posix/America/Puerto_Rico"));
  TEST_ASSERT(test_timezone(now, "posix/America/Noronha"));
  TEST_ASSERT(test_timezone(now, "posix/America/Sao_Paulo"));
  TEST_ASSERT(test_timezone(now, "posix/America/Cancun"));
  TEST_ASSERT(test_timezone(now, "posix/America/Aruba"));
  TEST_ASSERT(test_timezone(now, "posix/America/Yellowknife"));
  TEST_ASSERT(test_timezone(now, "posix/America/Knox_IN"));
  TEST_ASSERT(test_timezone(now, "posix/America/Halifax"));
  TEST_ASSERT(test_timezone(now, "posix/America/Grand_Turk"));
  TEST_ASSERT(test_timezone(now, "posix/America/Vancouver"));
  TEST_ASSERT(test_timezone(now, "posix/America/Bogota"));
  TEST_ASSERT(test_timezone(now, "posix/America/Santo_Domingo"));
  TEST_ASSERT(test_timezone(now, "posix/America/Tortola"));
  TEST_ASSERT(test_timezone(now, "posix/America/Blanc-Sablon"));
  TEST_ASSERT(test_timezone(now, "posix/America/St_Thomas"));
  TEST_ASSERT(test_timezone(now, "posix/America/Scoresbysund"));
  TEST_ASSERT(test_timezone(now, "posix/America/Jamaica"));
  TEST_ASSERT(test_timezone(now, "posix/America/El_Salvador"));
  TEST_ASSERT(test_timezone(now, "posix/America/Montserrat"));
  TEST_ASSERT(test_timezone(now, "posix/America/Martinique"));
  TEST_ASSERT(test_timezone(now, "posix/America/Nassau"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indianapolis"));
  TEST_ASSERT(test_timezone(now, "posix/America/Pangnirtung"));
  TEST_ASSERT(test_timezone(now, "posix/America/Port_of_Spain"));
  TEST_ASSERT(test_timezone(now, "posix/America/Mexico_City"));
  TEST_ASSERT(test_timezone(now, "posix/America/Denver"));
  TEST_ASSERT(test_timezone(now, "posix/America/Dominica"));
  TEST_ASSERT(test_timezone(now, "posix/America/Eirunepe"));
  TEST_ASSERT(test_timezone(now, "posix/America/Atikokan"));
  TEST_ASSERT(test_timezone(now, "posix/America/Glace_Bay"));
  TEST_ASSERT(test_timezone(now, "posix/America/Rainy_River"));
  TEST_ASSERT(test_timezone(now, "posix/America/St_Barthelemy"));
  TEST_ASSERT(test_timezone(now, "posix/America/Miquelon"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indiana/Vevay"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indiana/Vincennes"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indiana/Marengo"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indiana/Petersburg"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indiana/Tell_City"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indiana/Knox"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indiana/Indianapolis"));
  TEST_ASSERT(test_timezone(now, "posix/America/Indiana/Winamac"));
  TEST_ASSERT(test_timezone(now, "posix/America/Menominee"));
  TEST_ASSERT(test_timezone(now, "posix/America/Porto_Velho"));
  TEST_ASSERT(test_timezone(now, "posix/America/Phoenix"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/San_Juan"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/Jujuy"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/Ushuaia"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/Buenos_Aires"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/La_Rioja"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/ComodRivadavia"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/Tucuman"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/San_Luis"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/Rio_Gallegos"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/Mendoza"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/Cordoba"));
  TEST_ASSERT(test_timezone(now, "posix/America/Argentina/Catamarca"));
  TEST_ASSERT(test_timezone(now, "posix/America/Dawson_Creek"));
  TEST_ASSERT(test_timezone(now, "posix/America/Merida"));
  TEST_ASSERT(test_timezone(now, "posix/America/Moncton"));
  TEST_ASSERT(test_timezone(now, "posix/America/Goose_Bay"));
  TEST_ASSERT(test_timezone(now, "posix/America/Grenada"));
  TEST_ASSERT(test_timezone(now, "posix/America/Barbados"));
  TEST_ASSERT(test_timezone(now, "posix/America/Tijuana"));
  TEST_ASSERT(test_timezone(now, "posix/America/Regina"));
  TEST_ASSERT(test_timezone(now, "posix/America/Ensenada"));
  TEST_ASSERT(test_timezone(now, "posix/America/Louisville"));
  TEST_ASSERT(test_timezone(now, "posix/America/Edmonton"));
  TEST_ASSERT(test_timezone(now, "posix/America/Bahia"));
  TEST_ASSERT(test_timezone(now, "posix/America/Nome"));
  TEST_ASSERT(test_timezone(now, "posix/America/Guayaquil"));
  TEST_ASSERT(test_timezone(now, "posix/America/La_Paz"));
  TEST_ASSERT(test_timezone(now, "posix/America/Costa_Rica"));
  TEST_ASSERT(test_timezone(now, "posix/America/Mazatlan"));
  TEST_ASSERT(test_timezone(now, "posix/America/Havana"));
  TEST_ASSERT(test_timezone(now, "posix/America/Marigot"));
  TEST_ASSERT(test_timezone(now, "posix/America/Mendoza"));
  TEST_ASSERT(test_timezone(now, "posix/America/Virgin"));
  TEST_ASSERT(test_timezone(now, "posix/America/Manaus"));
  TEST_ASSERT(test_timezone(now, "posix/America/Rosario"));
  TEST_ASSERT(test_timezone(now, "posix/America/Boa_Vista"));
  TEST_ASSERT(test_timezone(now, "posix/America/Winnipeg"));
  TEST_ASSERT(test_timezone(now, "posix/America/Paramaribo"));
  TEST_ASSERT(test_timezone(now, "posix/America/Danmarkshavn"));
  TEST_ASSERT(test_timezone(now, "posix/America/Caracas"));
  TEST_ASSERT(test_timezone(now, "posix/America/Swift_Current"));
  TEST_ASSERT(test_timezone(now, "posix/America/St_Johns"));
  TEST_ASSERT(test_timezone(now, "posix/America/Araguaina"));
  TEST_ASSERT(test_timezone(now, "posix/America/Adak"));
  TEST_ASSERT(test_timezone(now, "posix/America/Cordoba"));
  TEST_ASSERT(test_timezone(now, "posix/America/Fort_Wayne"));
  TEST_ASSERT(test_timezone(now, "posix/America/Catamarca"));
  TEST_ASSERT(test_timezone(now, "posix/America/Recife"));
  TEST_ASSERT(test_timezone(now, "posix/America/Toronto"));
  TEST_ASSERT(test_timezone(now, "posix/America/Anchorage"));
  TEST_ASSERT(test_timezone(now, "posix/America/St_Vincent"));
  TEST_ASSERT(test_timezone(now, "posix/America/St_Kitts"));
  TEST_ASSERT(test_timezone(now, "posix/America/Chihuahua"));
  TEST_ASSERT(test_timezone(now, "posix/America/Cayman"));
  TEST_ASSERT(test_timezone(now, "posix/America/Belize"));
  TEST_ASSERT(test_timezone(now, "posix/America/Cambridge_Bay"));
  TEST_ASSERT(test_timezone(now, "posix/America/Cuiaba"));
  TEST_ASSERT(test_timezone(now, "posix/America/Chicago"));
  TEST_ASSERT(test_timezone(now, "posix/America/Guyana"));
  TEST_ASSERT(test_timezone(now, "posix/America/Inuvik"));
  TEST_ASSERT(test_timezone(now, "posix/America/Asuncion"));
  TEST_ASSERT(test_timezone(now, "posix/America/Porto_Acre"));
  TEST_ASSERT(test_timezone(now, "posix/America/Hermosillo"));
  TEST_ASSERT(test_timezone(now, "posix/America/Shiprock"));
  TEST_ASSERT(test_timezone(now, "posix/America/Rio_Branco"));
  TEST_ASSERT(test_timezone(now, "posix/America/Yakutat"));
  TEST_ASSERT(test_timezone(now, "posix/America/Rankin_Inlet"));
  TEST_ASSERT(test_timezone(now, "posix/America/Boise"));
  TEST_ASSERT(test_timezone(now, "posix/Brazil/West"));
  TEST_ASSERT(test_timezone(now, "posix/Brazil/Acre"));
  TEST_ASSERT(test_timezone(now, "posix/Brazil/East"));
  TEST_ASSERT(test_timezone(now, "posix/Brazil/DeNoronha"));
  TEST_ASSERT(test_timezone(now, "posix/GMT0"));
  TEST_ASSERT(test_timezone(now, "posix/Libya"));
  TEST_ASSERT(test_timezone(now, "posix/W-SU"));
  TEST_ASSERT(test_timezone(now, "posix/NZ-CHAT"));
  TEST_ASSERT(test_timezone(now, "posix/Factory"));
  TEST_ASSERT(test_timezone(now, "posix/GB"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/West"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Canberra"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Broken_Hill"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Eucla"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Currie"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/South"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Lindeman"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Hobart"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Perth"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Yancowinna"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Victoria"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Sydney"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/North"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Adelaide"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/ACT"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Melbourne"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Tasmania"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Darwin"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Brisbane"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/LHI"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/NSW"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Queensland"));
  TEST_ASSERT(test_timezone(now, "posix/Australia/Lord_Howe"));
  TEST_ASSERT(test_timezone(now, "posix/NZ"));
  TEST_ASSERT(test_timezone(now, "Africa/Accra"));
  TEST_ASSERT(test_timezone(now, "Africa/Lubumbashi"));
  TEST_ASSERT(test_timezone(now, "Africa/Bangui"));
  TEST_ASSERT(test_timezone(now, "Africa/Asmara"));
  TEST_ASSERT(test_timezone(now, "Africa/Freetown"));
  TEST_ASSERT(test_timezone(now, "Africa/Mbabane"));
  TEST_ASSERT(test_timezone(now, "Africa/Djibouti"));
  TEST_ASSERT(test_timezone(now, "Africa/Ndjamena"));
  TEST_ASSERT(test_timezone(now, "Africa/Porto-Novo"));
  TEST_ASSERT(test_timezone(now, "Africa/Nouakchott"));
  TEST_ASSERT(test_timezone(now, "Africa/Brazzaville"));
  TEST_ASSERT(test_timezone(now, "Africa/Tunis"));
  TEST_ASSERT(test_timezone(now, "Africa/Dar_es_Salaam"));
  TEST_ASSERT(test_timezone(now, "Africa/Lusaka"));
  TEST_ASSERT(test_timezone(now, "Africa/Banjul"));
  TEST_ASSERT(test_timezone(now, "Africa/Sao_Tome"));
  TEST_ASSERT(test_timezone(now, "Africa/Monrovia"));
  TEST_ASSERT(test_timezone(now, "Africa/Lagos"));
  TEST_ASSERT(test_timezone(now, "Africa/Conakry"));
  TEST_ASSERT(test_timezone(now, "Africa/Tripoli"));
  TEST_ASSERT(test_timezone(now, "Africa/Algiers"));
  TEST_ASSERT(test_timezone(now, "Africa/Casablanca"));
  TEST_ASSERT(test_timezone(now, "Africa/Lome"));
  TEST_ASSERT(test_timezone(now, "Africa/Bamako"));
  TEST_ASSERT(test_timezone(now, "Africa/Nairobi"));
  TEST_ASSERT(test_timezone(now, "Africa/Douala"));
  TEST_ASSERT(test_timezone(now, "Africa/Addis_Ababa"));
  TEST_ASSERT(test_timezone(now, "Africa/El_Aaiun"));
  TEST_ASSERT(test_timezone(now, "Africa/Ceuta"));
  TEST_ASSERT(test_timezone(now, "Africa/Harare"));
  TEST_ASSERT(test_timezone(now, "Africa/Libreville"));
  TEST_ASSERT(test_timezone(now, "Africa/Johannesburg"));
  TEST_ASSERT(test_timezone(now, "Africa/Timbuktu"));
  TEST_ASSERT(test_timezone(now, "Africa/Niamey"));
  TEST_ASSERT(test_timezone(now, "Africa/Windhoek"));
  TEST_ASSERT(test_timezone(now, "Africa/Bissau"));
  TEST_ASSERT(test_timezone(now, "Africa/Maputo"));
  TEST_ASSERT(test_timezone(now, "Africa/Kigali"));
  TEST_ASSERT(test_timezone(now, "Africa/Dakar"));
  TEST_ASSERT(test_timezone(now, "Africa/Ouagadougou"));
  TEST_ASSERT(test_timezone(now, "Africa/Gaborone"));
  TEST_ASSERT(test_timezone(now, "Africa/Khartoum"));
  TEST_ASSERT(test_timezone(now, "Africa/Bujumbura"));
  TEST_ASSERT(test_timezone(now, "Africa/Luanda"));
  TEST_ASSERT(test_timezone(now, "Africa/Malabo"));
  TEST_ASSERT(test_timezone(now, "Africa/Asmera"));
  TEST_ASSERT(test_timezone(now, "Africa/Maseru"));
  TEST_ASSERT(test_timezone(now, "Africa/Abidjan"));
  TEST_ASSERT(test_timezone(now, "Africa/Kinshasa"));
  TEST_ASSERT(test_timezone(now, "Africa/Blantyre"));
  TEST_ASSERT(test_timezone(now, "Africa/Cairo"));
  TEST_ASSERT(test_timezone(now, "Africa/Kampala"));
  TEST_ASSERT(test_timezone(now, "Africa/Mogadishu"));
  TEST_ASSERT(test_timezone(now, "Universal"));
  TEST_ASSERT(test_timezone(now, "EST"));
  TEST_ASSERT(test_timezone(now, "right/CST6CDT"));
  TEST_ASSERT(test_timezone(now, "right/US/Pacific"));
  TEST_ASSERT(test_timezone(now, "right/US/Indiana-Starke"));
  TEST_ASSERT(test_timezone(now, "right/US/Samoa"));
  TEST_ASSERT(test_timezone(now, "right/US/Arizona"));
  TEST_ASSERT(test_timezone(now, "right/US/Aleutian"));
  TEST_ASSERT(test_timezone(now, "right/US/Michigan"));
  TEST_ASSERT(test_timezone(now, "right/US/Alaska"));
  TEST_ASSERT(test_timezone(now, "right/US/Central"));
  TEST_ASSERT(test_timezone(now, "right/US/Hawaii"));
  TEST_ASSERT(test_timezone(now, "right/US/East-Indiana"));
  TEST_ASSERT(test_timezone(now, "right/US/Eastern"));
  TEST_ASSERT(test_timezone(now, "right/US/Mountain"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Noumea"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Samoa"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Apia"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Auckland"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Fakaofo"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Saipan"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Easter"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Norfolk"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Kosrae"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Tarawa"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Tahiti"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Pago_Pago"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Majuro"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Guam"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Ponape"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Tongatapu"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Funafuti"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Wallis"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Efate"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Marquesas"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Enderbury"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Pitcairn"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Yap"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Wake"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Johnston"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Kwajalein"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Chatham"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Gambier"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Galapagos"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Kiritimati"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Honolulu"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Truk"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Midway"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Fiji"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Rarotonga"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Guadalcanal"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Nauru"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Palau"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Port_Moresby"));
  TEST_ASSERT(test_timezone(now, "right/Pacific/Niue"));
  TEST_ASSERT(test_timezone(now, "right/GMT"));
  TEST_ASSERT(test_timezone(now, "right/Hongkong"));
  TEST_ASSERT(test_timezone(now, "right/ROK"));
  TEST_ASSERT(test_timezone(now, "right/Navajo"));
  TEST_ASSERT(test_timezone(now, "right/ROC"));
  TEST_ASSERT(test_timezone(now, "right/WET"));
  TEST_ASSERT(test_timezone(now, "right/CET"));
  TEST_ASSERT(test_timezone(now, "right/MET"));
  TEST_ASSERT(test_timezone(now, "right/MST"));
  TEST_ASSERT(test_timezone(now, "right/Turkey"));
  TEST_ASSERT(test_timezone(now, "right/Zulu"));
  TEST_ASSERT(test_timezone(now, "right/GMT+0"));
  TEST_ASSERT(test_timezone(now, "right/Canada/Saskatchewan"));
  TEST_ASSERT(test_timezone(now, "right/Canada/Pacific"));
  TEST_ASSERT(test_timezone(now, "right/Canada/Yukon"));
  TEST_ASSERT(test_timezone(now, "right/Canada/East-Saskatchewan"));
  TEST_ASSERT(test_timezone(now, "right/Canada/Newfoundland"));
  TEST_ASSERT(test_timezone(now, "right/Canada/Central"));
  TEST_ASSERT(test_timezone(now, "right/Canada/Eastern"));
  TEST_ASSERT(test_timezone(now, "right/Canada/Atlantic"));
  TEST_ASSERT(test_timezone(now, "right/Canada/Mountain"));
  TEST_ASSERT(test_timezone(now, "right/Singapore"));
  TEST_ASSERT(test_timezone(now, "right/UCT"));
  TEST_ASSERT(test_timezone(now, "right/Poland"));
  TEST_ASSERT(test_timezone(now, "right/Chile/Continental"));
  TEST_ASSERT(test_timezone(now, "right/Chile/EasterIsland"));
  TEST_ASSERT(test_timezone(now, "right/Portugal"));
  TEST_ASSERT(test_timezone(now, "right/Egypt"));
  TEST_ASSERT(test_timezone(now, "right/Japan"));
  TEST_ASSERT(test_timezone(now, "right/Iran"));
  TEST_ASSERT(test_timezone(now, "right/EET"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Oslo"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Bratislava"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Gibraltar"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Skopje"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Simferopol"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Zurich"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Vienna"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Paris"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Jersey"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Tallinn"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Madrid"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Volgograd"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Zaporozhye"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Mariehamn"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Vaduz"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Moscow"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Stockholm"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Minsk"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Andorra"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Istanbul"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Tiraspol"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Podgorica"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Bucharest"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Ljubljana"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Brussels"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Amsterdam"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Riga"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Tirane"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Berlin"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Guernsey"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Warsaw"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Vatican"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Malta"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Nicosia"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Budapest"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Kaliningrad"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Sarajevo"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Isle_of_Man"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Rome"));
  TEST_ASSERT(test_timezone(now, "right/Europe/London"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Vilnius"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Samara"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Belfast"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Athens"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Copenhagen"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Belgrade"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Sofia"));
  TEST_ASSERT(test_timezone(now, "right/Europe/San_Marino"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Helsinki"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Uzhgorod"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Monaco"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Prague"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Zagreb"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Lisbon"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Chisinau"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Dublin"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Luxembourg"));
  TEST_ASSERT(test_timezone(now, "right/Europe/Kiev"));
  TEST_ASSERT(test_timezone(now, "right/Jamaica"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Chagos"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Comoro"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Mauritius"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Mayotte"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Kerguelen"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Maldives"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Antananarivo"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Mahe"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Cocos"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Christmas"));
  TEST_ASSERT(test_timezone(now, "right/Indian/Reunion"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Accra"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Lubumbashi"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Bangui"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Asmara"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Freetown"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Mbabane"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Djibouti"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Ndjamena"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Porto-Novo"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Nouakchott"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Brazzaville"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Tunis"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Dar_es_Salaam"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Lusaka"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Banjul"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Sao_Tome"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Monrovia"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Lagos"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Conakry"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Tripoli"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Algiers"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Casablanca"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Lome"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Bamako"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Nairobi"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Douala"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Addis_Ababa"));
  TEST_ASSERT(test_timezone(now, "right/Africa/El_Aaiun"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Ceuta"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Harare"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Libreville"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Johannesburg"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Timbuktu"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Niamey"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Windhoek"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Bissau"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Maputo"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Kigali"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Dakar"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Ouagadougou"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Gaborone"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Khartoum"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Bujumbura"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Luanda"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Malabo"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Asmera"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Maseru"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Abidjan"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Kinshasa"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Blantyre"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Cairo"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Kampala"));
  TEST_ASSERT(test_timezone(now, "right/Africa/Mogadishu"));
  TEST_ASSERT(test_timezone(now, "right/Universal"));
  TEST_ASSERT(test_timezone(now, "right/EST"));
  TEST_ASSERT(test_timezone(now, "right/Greenwich"));
  TEST_ASSERT(test_timezone(now, "right/Eire"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Qatar"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Makassar"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Colombo"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Chungking"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Macau"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Choibalsan"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Rangoon"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Harbin"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Yerevan"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Brunei"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Omsk"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Chongqing"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Tbilisi"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Tehran"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Manila"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Yakutsk"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Qyzylorda"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Dhaka"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Singapore"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Jakarta"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Novosibirsk"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Saigon"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Krasnoyarsk"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Kabul"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Bahrain"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Urumqi"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Thimbu"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Ulan_Bator"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Taipei"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Tashkent"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Dacca"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Aqtau"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Seoul"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Istanbul"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Tel_Aviv"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Almaty"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Phnom_Penh"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Baku"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Anadyr"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Aqtobe"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Kuwait"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Irkutsk"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Ulaanbaatar"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Tokyo"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Gaza"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Riyadh87"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Yekaterinburg"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Riyadh88"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Kolkata"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Nicosia"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Jayapura"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Shanghai"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Pyongyang"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Macao"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Dushanbe"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Kuching"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Vientiane"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Riyadh"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Dili"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Samarkand"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Ashkhabad"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Calcutta"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Hong_Kong"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Sakhalin"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Beirut"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Damascus"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Katmandu"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Jerusalem"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Riyadh89"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Vladivostok"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Kamchatka"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Dubai"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Kashgar"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Ashgabat"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Amman"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Karachi"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Bangkok"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Oral"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Thimphu"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Bishkek"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Baghdad"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Kuala_Lumpur"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Pontianak"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Ho_Chi_Minh"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Ujung_Pandang"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Muscat"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Aden"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Hovd"));
  TEST_ASSERT(test_timezone(now, "right/Asia/Magadan"));
  TEST_ASSERT(test_timezone(now, "right/EST5EDT"));
  TEST_ASSERT(test_timezone(now, "right/PST8PDT"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Bermuda"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/St_Helena"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Cape_Verde"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Stanley"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Azores"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Jan_Mayen"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Reykjavik"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Madeira"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Canary"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Faeroe"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/Faroe"));
  TEST_ASSERT(test_timezone(now, "right/Atlantic/South_Georgia"));
  TEST_ASSERT(test_timezone(now, "right/Kwajalein"));
  TEST_ASSERT(test_timezone(now, "right/UTC"));
  TEST_ASSERT(test_timezone(now, "right/GMT-0"));
  TEST_ASSERT(test_timezone(now, "right/MST7MDT"));
  TEST_ASSERT(test_timezone(now, "right/GB-Eire"));
  TEST_ASSERT(test_timezone(now, "right/PRC"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/CST6CDT"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/CST6"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/PST8"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/YST9"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/EST5"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/AST4"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/AST4ADT"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/YST9YDT"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/EST5EDT"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/PST8PDT"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/MST7MDT"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/HST10"));
  TEST_ASSERT(test_timezone(now, "right/SystemV/MST7"));
  TEST_ASSERT(test_timezone(now, "right/Arctic/Longyearbyen"));
  TEST_ASSERT(test_timezone(now, "right/Cuba"));
  TEST_ASSERT(test_timezone(now, "right/Israel"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-3"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+1"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-5"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-13"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-1"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-9"));
  TEST_ASSERT(test_timezone(now, "right/Etc/Zulu"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+0"));
  TEST_ASSERT(test_timezone(now, "right/Etc/UCT"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+12"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+9"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-6"));
  TEST_ASSERT(test_timezone(now, "right/Etc/Universal"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-2"));
  TEST_ASSERT(test_timezone(now, "right/Etc/Greenwich"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+3"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+8"));
  TEST_ASSERT(test_timezone(now, "right/Etc/UTC"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-0"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-14"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+10"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+4"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+5"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-12"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-8"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+7"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-11"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+6"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT0"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-7"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+11"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-4"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT+2"));
  TEST_ASSERT(test_timezone(now, "right/Etc/GMT-10"));
  TEST_ASSERT(test_timezone(now, "right/HST"));
  TEST_ASSERT(test_timezone(now, "right/Iceland"));
  TEST_ASSERT(test_timezone(now, "right/Mexico/BajaNorte"));
  TEST_ASSERT(test_timezone(now, "right/Mexico/BajaSur"));
  TEST_ASSERT(test_timezone(now, "right/Mexico/General"));
  TEST_ASSERT(test_timezone(now, "right/Mideast/Riyadh87"));
  TEST_ASSERT(test_timezone(now, "right/Mideast/Riyadh88"));
  TEST_ASSERT(test_timezone(now, "right/Mideast/Riyadh89"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/Davis"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/DumontDUrville"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/Syowa"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/Palmer"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/Casey"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/Rothera"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/Mawson"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/McMurdo"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/South_Pole"));
  TEST_ASSERT(test_timezone(now, "right/Antarctica/Vostok"));
  TEST_ASSERT(test_timezone(now, "right/America/Curacao"));
  TEST_ASSERT(test_timezone(now, "right/America/St_Lucia"));
  TEST_ASSERT(test_timezone(now, "right/America/Managua"));
  TEST_ASSERT(test_timezone(now, "right/America/Lima"));
  TEST_ASSERT(test_timezone(now, "right/America/Nipigon"));
  TEST_ASSERT(test_timezone(now, "right/America/Cayenne"));
  TEST_ASSERT(test_timezone(now, "right/America/Detroit"));
  TEST_ASSERT(test_timezone(now, "right/America/Kentucky/Louisville"));
  TEST_ASSERT(test_timezone(now, "right/America/Kentucky/Monticello"));
  TEST_ASSERT(test_timezone(now, "right/America/Belem"));
  TEST_ASSERT(test_timezone(now, "right/America/Jujuy"));
  TEST_ASSERT(test_timezone(now, "right/America/Godthab"));
  TEST_ASSERT(test_timezone(now, "right/America/Guatemala"));
  TEST_ASSERT(test_timezone(now, "right/America/Atka"));
  TEST_ASSERT(test_timezone(now, "right/America/Montreal"));
  TEST_ASSERT(test_timezone(now, "right/America/Resolute"));
  TEST_ASSERT(test_timezone(now, "right/America/Thunder_Bay"));
  TEST_ASSERT(test_timezone(now, "right/America/North_Dakota/New_Salem"));
  TEST_ASSERT(test_timezone(now, "right/America/North_Dakota/Center"));
  TEST_ASSERT(test_timezone(now, "right/America/Panama"));
  TEST_ASSERT(test_timezone(now, "right/America/Los_Angeles"));
  TEST_ASSERT(test_timezone(now, "right/America/Whitehorse"));
  TEST_ASSERT(test_timezone(now, "right/America/Santiago"));
  TEST_ASSERT(test_timezone(now, "right/America/Iqaluit"));
  TEST_ASSERT(test_timezone(now, "right/America/Dawson"));
  TEST_ASSERT(test_timezone(now, "right/America/Juneau"));
  TEST_ASSERT(test_timezone(now, "right/America/Thule"));
  TEST_ASSERT(test_timezone(now, "right/America/Fortaleza"));
  TEST_ASSERT(test_timezone(now, "right/America/Montevideo"));
  TEST_ASSERT(test_timezone(now, "right/America/Tegucigalpa"));
  TEST_ASSERT(test_timezone(now, "right/America/Port-au-Prince"));
  TEST_ASSERT(test_timezone(now, "right/America/Guadeloupe"));
  TEST_ASSERT(test_timezone(now, "right/America/Coral_Harbour"));
  TEST_ASSERT(test_timezone(now, "right/America/Monterrey"));
  TEST_ASSERT(test_timezone(now, "right/America/Anguilla"));
  TEST_ASSERT(test_timezone(now, "right/America/Antigua"));
  TEST_ASSERT(test_timezone(now, "right/America/Campo_Grande"));
  TEST_ASSERT(test_timezone(now, "right/America/Buenos_Aires"));
  TEST_ASSERT(test_timezone(now, "right/America/Maceio"));
  TEST_ASSERT(test_timezone(now, "right/America/New_York"));
  TEST_ASSERT(test_timezone(now, "right/America/Puerto_Rico"));
  TEST_ASSERT(test_timezone(now, "right/America/Noronha"));
  TEST_ASSERT(test_timezone(now, "right/America/Sao_Paulo"));
  TEST_ASSERT(test_timezone(now, "right/America/Cancun"));
  TEST_ASSERT(test_timezone(now, "right/America/Aruba"));
  TEST_ASSERT(test_timezone(now, "right/America/Yellowknife"));
  TEST_ASSERT(test_timezone(now, "right/America/Knox_IN"));
  TEST_ASSERT(test_timezone(now, "right/America/Halifax"));
  TEST_ASSERT(test_timezone(now, "right/America/Grand_Turk"));
  TEST_ASSERT(test_timezone(now, "right/America/Vancouver"));
  TEST_ASSERT(test_timezone(now, "right/America/Bogota"));
  TEST_ASSERT(test_timezone(now, "right/America/Santo_Domingo"));
  TEST_ASSERT(test_timezone(now, "right/America/Tortola"));
  TEST_ASSERT(test_timezone(now, "right/America/Blanc-Sablon"));
  TEST_ASSERT(test_timezone(now, "right/America/St_Thomas"));
  TEST_ASSERT(test_timezone(now, "right/America/Scoresbysund"));
  TEST_ASSERT(test_timezone(now, "right/America/Jamaica"));
  TEST_ASSERT(test_timezone(now, "right/America/El_Salvador"));
  TEST_ASSERT(test_timezone(now, "right/America/Montserrat"));
  TEST_ASSERT(test_timezone(now, "right/America/Martinique"));
  TEST_ASSERT(test_timezone(now, "right/America/Nassau"));
  TEST_ASSERT(test_timezone(now, "right/America/Indianapolis"));
  TEST_ASSERT(test_timezone(now, "right/America/Pangnirtung"));
  TEST_ASSERT(test_timezone(now, "right/America/Port_of_Spain"));
  TEST_ASSERT(test_timezone(now, "right/America/Mexico_City"));
  TEST_ASSERT(test_timezone(now, "right/America/Denver"));
  TEST_ASSERT(test_timezone(now, "right/America/Dominica"));
  TEST_ASSERT(test_timezone(now, "right/America/Eirunepe"));
  TEST_ASSERT(test_timezone(now, "right/America/Atikokan"));
  TEST_ASSERT(test_timezone(now, "right/America/Glace_Bay"));
  TEST_ASSERT(test_timezone(now, "right/America/Rainy_River"));
  TEST_ASSERT(test_timezone(now, "right/America/St_Barthelemy"));
  TEST_ASSERT(test_timezone(now, "right/America/Miquelon"));
  TEST_ASSERT(test_timezone(now, "right/America/Indiana/Vevay"));
  TEST_ASSERT(test_timezone(now, "right/America/Indiana/Vincennes"));
  TEST_ASSERT(test_timezone(now, "right/America/Indiana/Marengo"));
  TEST_ASSERT(test_timezone(now, "right/America/Indiana/Petersburg"));
  TEST_ASSERT(test_timezone(now, "right/America/Indiana/Tell_City"));
  TEST_ASSERT(test_timezone(now, "right/America/Indiana/Knox"));
  TEST_ASSERT(test_timezone(now, "right/America/Indiana/Indianapolis"));
  TEST_ASSERT(test_timezone(now, "right/America/Indiana/Winamac"));
  TEST_ASSERT(test_timezone(now, "right/America/Menominee"));
  TEST_ASSERT(test_timezone(now, "right/America/Porto_Velho"));
  TEST_ASSERT(test_timezone(now, "right/America/Phoenix"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/San_Juan"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/Jujuy"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/Ushuaia"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/Buenos_Aires"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/La_Rioja"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/ComodRivadavia"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/Tucuman"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/San_Luis"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/Rio_Gallegos"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/Mendoza"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/Cordoba"));
  TEST_ASSERT(test_timezone(now, "right/America/Argentina/Catamarca"));
  TEST_ASSERT(test_timezone(now, "right/America/Dawson_Creek"));
  TEST_ASSERT(test_timezone(now, "right/America/Merida"));
  TEST_ASSERT(test_timezone(now, "right/America/Moncton"));
  TEST_ASSERT(test_timezone(now, "right/America/Goose_Bay"));
  TEST_ASSERT(test_timezone(now, "right/America/Grenada"));
  TEST_ASSERT(test_timezone(now, "right/America/Barbados"));
  TEST_ASSERT(test_timezone(now, "right/America/Tijuana"));
  TEST_ASSERT(test_timezone(now, "right/America/Regina"));
  TEST_ASSERT(test_timezone(now, "right/America/Ensenada"));
  TEST_ASSERT(test_timezone(now, "right/America/Louisville"));
  TEST_ASSERT(test_timezone(now, "right/America/Edmonton"));
  TEST_ASSERT(test_timezone(now, "right/America/Bahia"));
  TEST_ASSERT(test_timezone(now, "right/America/Nome"));
  TEST_ASSERT(test_timezone(now, "right/America/Guayaquil"));
  TEST_ASSERT(test_timezone(now, "right/America/La_Paz"));
  TEST_ASSERT(test_timezone(now, "right/America/Costa_Rica"));
  TEST_ASSERT(test_timezone(now, "right/America/Mazatlan"));
  TEST_ASSERT(test_timezone(now, "right/America/Havana"));
  TEST_ASSERT(test_timezone(now, "right/America/Marigot"));
  TEST_ASSERT(test_timezone(now, "right/America/Mendoza"));
  TEST_ASSERT(test_timezone(now, "right/America/Virgin"));
  TEST_ASSERT(test_timezone(now, "right/America/Manaus"));
  TEST_ASSERT(test_timezone(now, "right/America/Rosario"));
  TEST_ASSERT(test_timezone(now, "right/America/Boa_Vista"));
  TEST_ASSERT(test_timezone(now, "right/America/Winnipeg"));
  TEST_ASSERT(test_timezone(now, "right/America/Paramaribo"));
  TEST_ASSERT(test_timezone(now, "right/America/Danmarkshavn"));
  TEST_ASSERT(test_timezone(now, "right/America/Caracas"));
  TEST_ASSERT(test_timezone(now, "right/America/Swift_Current"));
  TEST_ASSERT(test_timezone(now, "right/America/St_Johns"));
  TEST_ASSERT(test_timezone(now, "right/America/Araguaina"));
  TEST_ASSERT(test_timezone(now, "right/America/Adak"));
  TEST_ASSERT(test_timezone(now, "right/America/Cordoba"));
  TEST_ASSERT(test_timezone(now, "right/America/Fort_Wayne"));
  TEST_ASSERT(test_timezone(now, "right/America/Catamarca"));
  TEST_ASSERT(test_timezone(now, "right/America/Recife"));
  TEST_ASSERT(test_timezone(now, "right/America/Toronto"));
  TEST_ASSERT(test_timezone(now, "right/America/Anchorage"));
  TEST_ASSERT(test_timezone(now, "right/America/St_Vincent"));
  TEST_ASSERT(test_timezone(now, "right/America/St_Kitts"));
  TEST_ASSERT(test_timezone(now, "right/America/Chihuahua"));
  TEST_ASSERT(test_timezone(now, "right/America/Cayman"));
  TEST_ASSERT(test_timezone(now, "right/America/Belize"));
  TEST_ASSERT(test_timezone(now, "right/America/Cambridge_Bay"));
  TEST_ASSERT(test_timezone(now, "right/America/Cuiaba"));
  TEST_ASSERT(test_timezone(now, "right/America/Chicago"));
  TEST_ASSERT(test_timezone(now, "right/America/Guyana"));
  TEST_ASSERT(test_timezone(now, "right/America/Inuvik"));
  TEST_ASSERT(test_timezone(now, "right/America/Asuncion"));
  TEST_ASSERT(test_timezone(now, "right/America/Porto_Acre"));
  TEST_ASSERT(test_timezone(now, "right/America/Hermosillo"));
  TEST_ASSERT(test_timezone(now, "right/America/Shiprock"));
  TEST_ASSERT(test_timezone(now, "right/America/Rio_Branco"));
  TEST_ASSERT(test_timezone(now, "right/America/Yakutat"));
  TEST_ASSERT(test_timezone(now, "right/America/Rankin_Inlet"));
  TEST_ASSERT(test_timezone(now, "right/America/Boise"));
  TEST_ASSERT(test_timezone(now, "right/Brazil/West"));
  TEST_ASSERT(test_timezone(now, "right/Brazil/Acre"));
  TEST_ASSERT(test_timezone(now, "right/Brazil/East"));
  TEST_ASSERT(test_timezone(now, "right/Brazil/DeNoronha"));
  TEST_ASSERT(test_timezone(now, "right/GMT0"));
  TEST_ASSERT(test_timezone(now, "right/Libya"));
  TEST_ASSERT(test_timezone(now, "right/W-SU"));
  TEST_ASSERT(test_timezone(now, "right/NZ-CHAT"));
  TEST_ASSERT(test_timezone(now, "right/Factory"));
  TEST_ASSERT(test_timezone(now, "right/GB"));
  TEST_ASSERT(test_timezone(now, "right/Australia/West"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Canberra"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Broken_Hill"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Eucla"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Currie"));
  TEST_ASSERT(test_timezone(now, "right/Australia/South"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Lindeman"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Hobart"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Perth"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Yancowinna"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Victoria"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Sydney"));
  TEST_ASSERT(test_timezone(now, "right/Australia/North"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Adelaide"));
  TEST_ASSERT(test_timezone(now, "right/Australia/ACT"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Melbourne"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Tasmania"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Darwin"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Brisbane"));
  TEST_ASSERT(test_timezone(now, "right/Australia/LHI"));
  TEST_ASSERT(test_timezone(now, "right/Australia/NSW"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Queensland"));
  TEST_ASSERT(test_timezone(now, "right/Australia/Lord_Howe"));
  TEST_ASSERT(test_timezone(now, "right/NZ"));
  TEST_ASSERT(test_timezone(now, "Greenwich"));
  TEST_ASSERT(test_timezone(now, "Eire"));
  TEST_ASSERT(test_timezone(now, "Asia/Qatar"));
  TEST_ASSERT(test_timezone(now, "Asia/Makassar"));
  TEST_ASSERT(test_timezone(now, "Asia/Colombo"));
  TEST_ASSERT(test_timezone(now, "Asia/Chungking"));
  TEST_ASSERT(test_timezone(now, "Asia/Macau"));
  TEST_ASSERT(test_timezone(now, "Asia/Choibalsan"));
  TEST_ASSERT(test_timezone(now, "Asia/Rangoon"));
  TEST_ASSERT(test_timezone(now, "Asia/Harbin"));
  TEST_ASSERT(test_timezone(now, "Asia/Yerevan"));
  TEST_ASSERT(test_timezone(now, "Asia/Brunei"));
  TEST_ASSERT(test_timezone(now, "Asia/Omsk"));
  TEST_ASSERT(test_timezone(now, "Asia/Chongqing"));
  TEST_ASSERT(test_timezone(now, "Asia/Tbilisi"));
  TEST_ASSERT(test_timezone(now, "Asia/Tehran"));
  TEST_ASSERT(test_timezone(now, "Asia/Manila"));
  TEST_ASSERT(test_timezone(now, "Asia/Yakutsk"));
  TEST_ASSERT(test_timezone(now, "Asia/Qyzylorda"));
  TEST_ASSERT(test_timezone(now, "Asia/Dhaka"));
  TEST_ASSERT(test_timezone(now, "Asia/Singapore"));
  TEST_ASSERT(test_timezone(now, "Asia/Jakarta"));
  TEST_ASSERT(test_timezone(now, "Asia/Novosibirsk"));
  TEST_ASSERT(test_timezone(now, "Asia/Saigon"));
  TEST_ASSERT(test_timezone(now, "Asia/Krasnoyarsk"));
  TEST_ASSERT(test_timezone(now, "Asia/Kabul"));
  TEST_ASSERT(test_timezone(now, "Asia/Bahrain"));
  TEST_ASSERT(test_timezone(now, "Asia/Urumqi"));
  TEST_ASSERT(test_timezone(now, "Asia/Thimbu"));
  TEST_ASSERT(test_timezone(now, "Asia/Ulan_Bator"));
  TEST_ASSERT(test_timezone(now, "Asia/Taipei"));
  TEST_ASSERT(test_timezone(now, "Asia/Tashkent"));
  TEST_ASSERT(test_timezone(now, "Asia/Dacca"));
  TEST_ASSERT(test_timezone(now, "Asia/Aqtau"));
  TEST_ASSERT(test_timezone(now, "Asia/Seoul"));
  TEST_ASSERT(test_timezone(now, "Asia/Istanbul"));
  TEST_ASSERT(test_timezone(now, "Asia/Tel_Aviv"));
  TEST_ASSERT(test_timezone(now, "Asia/Almaty"));
  TEST_ASSERT(test_timezone(now, "Asia/Phnom_Penh"));
  TEST_ASSERT(test_timezone(now, "Asia/Baku"));
  TEST_ASSERT(test_timezone(now, "Asia/Anadyr"));
  TEST_ASSERT(test_timezone(now, "Asia/Aqtobe"));
  TEST_ASSERT(test_timezone(now, "Asia/Kuwait"));
  TEST_ASSERT(test_timezone(now, "Asia/Irkutsk"));
  TEST_ASSERT(test_timezone(now, "Asia/Ulaanbaatar"));
  TEST_ASSERT(test_timezone(now, "Asia/Tokyo"));
  TEST_ASSERT(test_timezone(now, "Asia/Gaza"));
  TEST_ASSERT(test_timezone(now, "Asia/Riyadh87"));
  TEST_ASSERT(test_timezone(now, "Asia/Yekaterinburg"));
  TEST_ASSERT(test_timezone(now, "Asia/Riyadh88"));
  TEST_ASSERT(test_timezone(now, "Asia/Kolkata"));
  TEST_ASSERT(test_timezone(now, "Asia/Nicosia"));
  TEST_ASSERT(test_timezone(now, "Asia/Jayapura"));
  TEST_ASSERT(test_timezone(now, "Asia/Shanghai"));
  TEST_ASSERT(test_timezone(now, "Asia/Pyongyang"));
  TEST_ASSERT(test_timezone(now, "Asia/Macao"));
  TEST_ASSERT(test_timezone(now, "Asia/Dushanbe"));
  TEST_ASSERT(test_timezone(now, "Asia/Kuching"));
  TEST_ASSERT(test_timezone(now, "Asia/Vientiane"));
  TEST_ASSERT(test_timezone(now, "Asia/Riyadh"));
  TEST_ASSERT(test_timezone(now, "Asia/Dili"));
  TEST_ASSERT(test_timezone(now, "Asia/Samarkand"));
  TEST_ASSERT(test_timezone(now, "Asia/Ashkhabad"));
  TEST_ASSERT(test_timezone(now, "Asia/Calcutta"));
  TEST_ASSERT(test_timezone(now, "Asia/Hong_Kong"));
  TEST_ASSERT(test_timezone(now, "Asia/Sakhalin"));
  TEST_ASSERT(test_timezone(now, "Asia/Beirut"));
  TEST_ASSERT(test_timezone(now, "Asia/Damascus"));
  TEST_ASSERT(test_timezone(now, "Asia/Katmandu"));
  TEST_ASSERT(test_timezone(now, "Asia/Jerusalem"));
  TEST_ASSERT(test_timezone(now, "Asia/Riyadh89"));
  TEST_ASSERT(test_timezone(now, "Asia/Vladivostok"));
  TEST_ASSERT(test_timezone(now, "Asia/Kamchatka"));
  TEST_ASSERT(test_timezone(now, "Asia/Dubai"));
  TEST_ASSERT(test_timezone(now, "Asia/Kashgar"));
  TEST_ASSERT(test_timezone(now, "Asia/Ashgabat"));
  TEST_ASSERT(test_timezone(now, "Asia/Amman"));
  TEST_ASSERT(test_timezone(now, "Asia/Karachi"));
  TEST_ASSERT(test_timezone(now, "Asia/Bangkok"));
  TEST_ASSERT(test_timezone(now, "Asia/Oral"));
  TEST_ASSERT(test_timezone(now, "Asia/Thimphu"));
  TEST_ASSERT(test_timezone(now, "Asia/Bishkek"));
  TEST_ASSERT(test_timezone(now, "Asia/Baghdad"));
  TEST_ASSERT(test_timezone(now, "Asia/Kuala_Lumpur"));
  TEST_ASSERT(test_timezone(now, "Asia/Pontianak"));
  TEST_ASSERT(test_timezone(now, "Asia/Ho_Chi_Minh"));
  TEST_ASSERT(test_timezone(now, "Asia/Ujung_Pandang"));
  TEST_ASSERT(test_timezone(now, "Asia/Muscat"));
  TEST_ASSERT(test_timezone(now, "Asia/Aden"));
  TEST_ASSERT(test_timezone(now, "Asia/Hovd"));
  TEST_ASSERT(test_timezone(now, "Asia/Magadan"));
  TEST_ASSERT(test_timezone(now, "EST5EDT"));
  TEST_ASSERT(test_timezone(now, "PST8PDT"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Bermuda"));
  TEST_ASSERT(test_timezone(now, "Atlantic/St_Helena"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Cape_Verde"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Stanley"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Azores"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Jan_Mayen"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Reykjavik"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Madeira"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Canary"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Faeroe"));
  TEST_ASSERT(test_timezone(now, "Atlantic/Faroe"));
  TEST_ASSERT(test_timezone(now, "Atlantic/South_Georgia"));
  TEST_ASSERT(test_timezone(now, "Kwajalein"));
  TEST_ASSERT(test_timezone(now, "UTC"));
  TEST_ASSERT(test_timezone(now, "GMT-0"));
  TEST_ASSERT(test_timezone(now, "MST7MDT"));
  TEST_ASSERT(test_timezone(now, "GB-Eire"));
  TEST_ASSERT(test_timezone(now, "PRC"));
  TEST_ASSERT(test_timezone(now, "SystemV/CST6CDT"));
  TEST_ASSERT(test_timezone(now, "SystemV/CST6"));
  TEST_ASSERT(test_timezone(now, "SystemV/PST8"));
  TEST_ASSERT(test_timezone(now, "SystemV/YST9"));
  TEST_ASSERT(test_timezone(now, "SystemV/EST5"));
  TEST_ASSERT(test_timezone(now, "SystemV/AST4"));
  TEST_ASSERT(test_timezone(now, "SystemV/AST4ADT"));
  TEST_ASSERT(test_timezone(now, "SystemV/YST9YDT"));
  TEST_ASSERT(test_timezone(now, "SystemV/EST5EDT"));
  TEST_ASSERT(test_timezone(now, "SystemV/PST8PDT"));
  TEST_ASSERT(test_timezone(now, "SystemV/MST7MDT"));
  TEST_ASSERT(test_timezone(now, "SystemV/HST10"));
  TEST_ASSERT(test_timezone(now, "SystemV/MST7"));
  TEST_ASSERT(test_timezone(now, "Arctic/Longyearbyen"));
  TEST_ASSERT(test_timezone(now, "Cuba"));
  TEST_ASSERT(test_timezone(now, "Israel"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-3"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+1"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-5"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-13"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-1"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-9"));
  TEST_ASSERT(test_timezone(now, "Etc/Zulu"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+0"));
  TEST_ASSERT(test_timezone(now, "Etc/UCT"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+12"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+9"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-6"));
  TEST_ASSERT(test_timezone(now, "Etc/Universal"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-2"));
  TEST_ASSERT(test_timezone(now, "Etc/Greenwich"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+3"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+8"));
  TEST_ASSERT(test_timezone(now, "Etc/UTC"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-0"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-14"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+10"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+4"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+5"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-12"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-8"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+7"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-11"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+6"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT0"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-7"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+11"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-4"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT+2"));
  TEST_ASSERT(test_timezone(now, "Etc/GMT-10"));
  TEST_ASSERT(test_timezone(now, "HST"));
  TEST_ASSERT(test_timezone(now, "Iceland"));
  TEST_ASSERT(test_timezone(now, "Mexico/BajaNorte"));
  TEST_ASSERT(test_timezone(now, "Mexico/BajaSur"));
  TEST_ASSERT(test_timezone(now, "Mexico/General"));
  TEST_ASSERT(test_timezone(now, "Mideast/Riyadh87"));
  TEST_ASSERT(test_timezone(now, "Mideast/Riyadh88"));
  TEST_ASSERT(test_timezone(now, "Mideast/Riyadh89"));
  TEST_ASSERT(test_timezone(now, "Antarctica/Davis"));
  TEST_ASSERT(test_timezone(now, "Antarctica/DumontDUrville"));
  TEST_ASSERT(test_timezone(now, "Antarctica/Syowa"));
  TEST_ASSERT(test_timezone(now, "Antarctica/Palmer"));
  TEST_ASSERT(test_timezone(now, "Antarctica/Casey"));
  TEST_ASSERT(test_timezone(now, "Antarctica/Rothera"));
  TEST_ASSERT(test_timezone(now, "Antarctica/Mawson"));
  TEST_ASSERT(test_timezone(now, "Antarctica/McMurdo"));
  TEST_ASSERT(test_timezone(now, "Antarctica/South_Pole"));
  TEST_ASSERT(test_timezone(now, "Antarctica/Vostok"));
  TEST_ASSERT(test_timezone(now, "America/Curacao"));
  TEST_ASSERT(test_timezone(now, "America/St_Lucia"));
  TEST_ASSERT(test_timezone(now, "America/Managua"));
  TEST_ASSERT(test_timezone(now, "America/Lima"));
  TEST_ASSERT(test_timezone(now, "America/Nipigon"));
  TEST_ASSERT(test_timezone(now, "America/Cayenne"));
  TEST_ASSERT(test_timezone(now, "America/Detroit"));
  TEST_ASSERT(test_timezone(now, "America/Kentucky/Louisville"));
  TEST_ASSERT(test_timezone(now, "America/Kentucky/Monticello"));
  TEST_ASSERT(test_timezone(now, "America/Belem"));
  TEST_ASSERT(test_timezone(now, "America/Jujuy"));
  TEST_ASSERT(test_timezone(now, "America/Godthab"));
  TEST_ASSERT(test_timezone(now, "America/Guatemala"));
  TEST_ASSERT(test_timezone(now, "America/Atka"));
  TEST_ASSERT(test_timezone(now, "America/Montreal"));
  TEST_ASSERT(test_timezone(now, "America/Resolute"));
  TEST_ASSERT(test_timezone(now, "America/Thunder_Bay"));
  TEST_ASSERT(test_timezone(now, "America/North_Dakota/New_Salem"));
  TEST_ASSERT(test_timezone(now, "America/North_Dakota/Center"));
  TEST_ASSERT(test_timezone(now, "America/Panama"));
  TEST_ASSERT(test_timezone(now, "America/Los_Angeles"));
  TEST_ASSERT(test_timezone(now, "America/Whitehorse"));
  TEST_ASSERT(test_timezone(now, "America/Santiago"));
  TEST_ASSERT(test_timezone(now, "America/Iqaluit"));
  TEST_ASSERT(test_timezone(now, "America/Dawson"));
  TEST_ASSERT(test_timezone(now, "America/Juneau"));
  TEST_ASSERT(test_timezone(now, "America/Thule"));
  TEST_ASSERT(test_timezone(now, "America/Fortaleza"));
  TEST_ASSERT(test_timezone(now, "America/Montevideo"));
  TEST_ASSERT(test_timezone(now, "America/Tegucigalpa"));
  TEST_ASSERT(test_timezone(now, "America/Port-au-Prince"));
  TEST_ASSERT(test_timezone(now, "America/Guadeloupe"));
  TEST_ASSERT(test_timezone(now, "America/Coral_Harbour"));
  TEST_ASSERT(test_timezone(now, "America/Monterrey"));
  TEST_ASSERT(test_timezone(now, "America/Anguilla"));
  TEST_ASSERT(test_timezone(now, "America/Antigua"));
  TEST_ASSERT(test_timezone(now, "America/Campo_Grande"));
  TEST_ASSERT(test_timezone(now, "America/Buenos_Aires"));
  TEST_ASSERT(test_timezone(now, "America/Maceio"));
  TEST_ASSERT(test_timezone(now, "America/New_York"));
  TEST_ASSERT(test_timezone(now, "America/Puerto_Rico"));
  TEST_ASSERT(test_timezone(now, "America/Noronha"));
  TEST_ASSERT(test_timezone(now, "America/Sao_Paulo"));
  TEST_ASSERT(test_timezone(now, "America/Cancun"));
  TEST_ASSERT(test_timezone(now, "America/Aruba"));
  TEST_ASSERT(test_timezone(now, "America/Yellowknife"));
  TEST_ASSERT(test_timezone(now, "America/Knox_IN"));
  TEST_ASSERT(test_timezone(now, "America/Halifax"));
  TEST_ASSERT(test_timezone(now, "America/Grand_Turk"));
  TEST_ASSERT(test_timezone(now, "America/Vancouver"));
  TEST_ASSERT(test_timezone(now, "America/Bogota"));
  TEST_ASSERT(test_timezone(now, "America/Santo_Domingo"));
  TEST_ASSERT(test_timezone(now, "America/Tortola"));
  TEST_ASSERT(test_timezone(now, "America/Blanc-Sablon"));
  TEST_ASSERT(test_timezone(now, "America/St_Thomas"));
  TEST_ASSERT(test_timezone(now, "America/Scoresbysund"));
  TEST_ASSERT(test_timezone(now, "America/Jamaica"));
  TEST_ASSERT(test_timezone(now, "America/El_Salvador"));
  TEST_ASSERT(test_timezone(now, "America/Montserrat"));
  TEST_ASSERT(test_timezone(now, "America/Martinique"));
  TEST_ASSERT(test_timezone(now, "America/Nassau"));
  TEST_ASSERT(test_timezone(now, "America/Indianapolis"));
  TEST_ASSERT(test_timezone(now, "America/Pangnirtung"));
  TEST_ASSERT(test_timezone(now, "America/Port_of_Spain"));
  TEST_ASSERT(test_timezone(now, "America/Mexico_City"));
  TEST_ASSERT(test_timezone(now, "America/Denver"));
  TEST_ASSERT(test_timezone(now, "America/Dominica"));
  TEST_ASSERT(test_timezone(now, "America/Eirunepe"));
  TEST_ASSERT(test_timezone(now, "America/Atikokan"));
  TEST_ASSERT(test_timezone(now, "America/Glace_Bay"));
  TEST_ASSERT(test_timezone(now, "America/Rainy_River"));
  TEST_ASSERT(test_timezone(now, "America/St_Barthelemy"));
  TEST_ASSERT(test_timezone(now, "America/Miquelon"));
  TEST_ASSERT(test_timezone(now, "America/Indiana/Vevay"));
  TEST_ASSERT(test_timezone(now, "America/Indiana/Vincennes"));
  TEST_ASSERT(test_timezone(now, "America/Indiana/Marengo"));
  TEST_ASSERT(test_timezone(now, "America/Indiana/Petersburg"));
  TEST_ASSERT(test_timezone(now, "America/Indiana/Tell_City"));
  TEST_ASSERT(test_timezone(now, "America/Indiana/Knox"));
  TEST_ASSERT(test_timezone(now, "America/Indiana/Indianapolis"));
  TEST_ASSERT(test_timezone(now, "America/Indiana/Winamac"));
  TEST_ASSERT(test_timezone(now, "America/Menominee"));
  TEST_ASSERT(test_timezone(now, "America/Porto_Velho"));
  TEST_ASSERT(test_timezone(now, "America/Phoenix"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/San_Juan"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/Jujuy"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/Ushuaia"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/Buenos_Aires"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/La_Rioja"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/ComodRivadavia"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/Tucuman"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/San_Luis"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/Rio_Gallegos"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/Mendoza"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/Cordoba"));
  TEST_ASSERT(test_timezone(now, "America/Argentina/Catamarca"));
  TEST_ASSERT(test_timezone(now, "America/Dawson_Creek"));
  TEST_ASSERT(test_timezone(now, "America/Merida"));
  TEST_ASSERT(test_timezone(now, "America/Moncton"));
  TEST_ASSERT(test_timezone(now, "America/Goose_Bay"));
  TEST_ASSERT(test_timezone(now, "America/Grenada"));
  TEST_ASSERT(test_timezone(now, "America/Barbados"));
  TEST_ASSERT(test_timezone(now, "America/Tijuana"));
  TEST_ASSERT(test_timezone(now, "America/Regina"));
  TEST_ASSERT(test_timezone(now, "America/Ensenada"));
  TEST_ASSERT(test_timezone(now, "America/Louisville"));
  TEST_ASSERT(test_timezone(now, "America/Edmonton"));
  TEST_ASSERT(test_timezone(now, "America/Bahia"));
  TEST_ASSERT(test_timezone(now, "America/Nome"));
  TEST_ASSERT(test_timezone(now, "America/Guayaquil"));
  TEST_ASSERT(test_timezone(now, "America/La_Paz"));
  TEST_ASSERT(test_timezone(now, "America/Costa_Rica"));
  TEST_ASSERT(test_timezone(now, "America/Mazatlan"));
  TEST_ASSERT(test_timezone(now, "America/Havana"));
  TEST_ASSERT(test_timezone(now, "America/Marigot"));
  TEST_ASSERT(test_timezone(now, "America/Mendoza"));
  TEST_ASSERT(test_timezone(now, "America/Virgin"));
  TEST_ASSERT(test_timezone(now, "America/Manaus"));
  TEST_ASSERT(test_timezone(now, "America/Rosario"));
  TEST_ASSERT(test_timezone(now, "America/Boa_Vista"));
  TEST_ASSERT(test_timezone(now, "America/Winnipeg"));
  TEST_ASSERT(test_timezone(now, "America/Paramaribo"));
  TEST_ASSERT(test_timezone(now, "America/Danmarkshavn"));
  TEST_ASSERT(test_timezone(now, "America/Caracas"));
  TEST_ASSERT(test_timezone(now, "America/Swift_Current"));
  TEST_ASSERT(test_timezone(now, "America/St_Johns"));
  TEST_ASSERT(test_timezone(now, "America/Araguaina"));
  TEST_ASSERT(test_timezone(now, "America/Adak"));
  TEST_ASSERT(test_timezone(now, "America/Cordoba"));
  TEST_ASSERT(test_timezone(now, "America/Fort_Wayne"));
  TEST_ASSERT(test_timezone(now, "America/Catamarca"));
  TEST_ASSERT(test_timezone(now, "America/Recife"));
  TEST_ASSERT(test_timezone(now, "America/Toronto"));
  TEST_ASSERT(test_timezone(now, "America/Anchorage"));
  TEST_ASSERT(test_timezone(now, "America/St_Vincent"));
  TEST_ASSERT(test_timezone(now, "America/St_Kitts"));
  TEST_ASSERT(test_timezone(now, "America/Chihuahua"));
  TEST_ASSERT(test_timezone(now, "America/Cayman"));
  TEST_ASSERT(test_timezone(now, "America/Belize"));
  TEST_ASSERT(test_timezone(now, "America/Cambridge_Bay"));
  TEST_ASSERT(test_timezone(now, "America/Cuiaba"));
  TEST_ASSERT(test_timezone(now, "America/Chicago"));
  TEST_ASSERT(test_timezone(now, "America/Guyana"));
  TEST_ASSERT(test_timezone(now, "America/Inuvik"));
  TEST_ASSERT(test_timezone(now, "America/Asuncion"));
  TEST_ASSERT(test_timezone(now, "America/Porto_Acre"));
  TEST_ASSERT(test_timezone(now, "America/Hermosillo"));
  TEST_ASSERT(test_timezone(now, "America/Shiprock"));
  TEST_ASSERT(test_timezone(now, "America/Rio_Branco"));
  TEST_ASSERT(test_timezone(now, "America/Yakutat"));
  TEST_ASSERT(test_timezone(now, "America/Rankin_Inlet"));
  TEST_ASSERT(test_timezone(now, "America/Boise"));
  TEST_ASSERT(test_timezone(now, "Brazil/West"));
  TEST_ASSERT(test_timezone(now, "Brazil/Acre"));
  TEST_ASSERT(test_timezone(now, "Brazil/East"));
  TEST_ASSERT(test_timezone(now, "Brazil/DeNoronha"));
  TEST_ASSERT(test_timezone(now, "GMT0"));
  TEST_ASSERT(test_timezone(now, "Libya"));
  TEST_ASSERT(test_timezone(now, "W-SU"));
  TEST_ASSERT(test_timezone(now, "NZ-CHAT"));
  TEST_ASSERT(test_timezone(now, "Factory"));
  TEST_ASSERT(test_timezone(now, "GB"));
  TEST_ASSERT(test_timezone(now, "Australia/West"));
  TEST_ASSERT(test_timezone(now, "Australia/Canberra"));
  TEST_ASSERT(test_timezone(now, "Australia/Broken_Hill"));
  TEST_ASSERT(test_timezone(now, "Australia/Eucla"));
  TEST_ASSERT(test_timezone(now, "Australia/Currie"));
  TEST_ASSERT(test_timezone(now, "Australia/South"));
  TEST_ASSERT(test_timezone(now, "Australia/Lindeman"));
  TEST_ASSERT(test_timezone(now, "Australia/Hobart"));
  TEST_ASSERT(test_timezone(now, "Australia/Perth"));
  TEST_ASSERT(test_timezone(now, "Australia/Yancowinna"));
  TEST_ASSERT(test_timezone(now, "Australia/Victoria"));
  TEST_ASSERT(test_timezone(now, "Australia/Sydney"));
  TEST_ASSERT(test_timezone(now, "Australia/North"));
  TEST_ASSERT(test_timezone(now, "Australia/Adelaide"));
  TEST_ASSERT(test_timezone(now, "Australia/ACT"));
  TEST_ASSERT(test_timezone(now, "Australia/Melbourne"));
  TEST_ASSERT(test_timezone(now, "Australia/Tasmania"));
  TEST_ASSERT(test_timezone(now, "Australia/Darwin"));
  TEST_ASSERT(test_timezone(now, "Australia/Brisbane"));
  TEST_ASSERT(test_timezone(now, "Australia/LHI"));
  TEST_ASSERT(test_timezone(now, "Australia/NSW"));
  TEST_ASSERT(test_timezone(now, "Australia/Queensland"));
  TEST_ASSERT(test_timezone(now, "Australia/Lord_Howe"));
  TEST_ASSERT(test_timezone(now, "NZ"));
#endif
  app_shutdown();
  return rc;
}
