# do not edit -- automatically generated by arch changelog
# arch-tag: automatic-ChangeLog--devel@balabit.hu--other-1/syslog-ng--mainline--2.0
#

2006-02-26 09:38:42 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-18

    Summary:
      fixed a possible heap overflow introduced by the patches from 2006-02-24
    Revision:
      syslog-ng--mainline--2.0--patch-18

    	* src/logreader.c (log_reader_fetch_log): recalculate the available
    	buffer size before calling read() again, this is a possible heap
    	overflow which was introduced by
    	devel@balabit.hu--other-1/syslog-ng--mainline--2.0--patch-14
    	ChangeLog is in patch-15, this was never released however
    

    modified files:
     ChangeLog src/logreader.c


2006-02-26 08:50:05 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-17

    Summary:
      preparations for an 1.9.9 release
    Revision:
      syslog-ng--mainline--2.0--patch-17

    
    

    modified files:
     ChangeLog NEWS VERSION src/logmsg.c


2006-02-26 08:47:15 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-16

    Summary:
      added time_sleep() option to add a fixed latency to the poll loop
    Revision:
      syslog-ng--mainline--2.0--patch-16

    	* src/cfg-grammar.y: added KW_TIME_SLEEP processing
    
    	* src/cfg-lex.l: added keyword for KW_TIME_SLEEP
    
    	* src/main.c: wait using nanosleep if time_sleep() is set
    
    	* doc/reference/syslog-ng.xml: added documentation on time_sleep and
    	a section in the tuning part to explain it a little further
    
    

    modified files:
     ChangeLog doc/reference/syslog-ng.xml src/cfg-grammar.y
     src/cfg-lex.l src/cfg.h src/main.c


2006-02-24 16:24:14 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-15

    Summary:
      added missing ChangeLog from previous patchset
    Revision:
      syslog-ng--mainline--2.0--patch-15

    	* src/fdread.c (fd_do_read): added retrying on EINTR
    
    	* src/logreader.c (log_reader_iterate_buf): added msg_count argument
    	instead of the local variable as log_reader_iterate_buf might be
    	called multiple times and we do not want to fetch more than
    	fetch_limit() messages in total,
    	(log_reader_fetch_log): added loop to iterate over up to fetch_limit
    	messages without going back to the mainloop
    
    	
    

    modified files:
     ChangeLog


2006-02-24 16:19:33 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-14

    Summary:
      added reference/syslog-ng.txt to EXTRA_DIST
    Revision:
      syslog-ng--mainline--2.0--patch-14

    
    

    modified files:
     ChangeLog doc/Makefile.am src/fdread.c src/logreader.c


2006-02-24 16:13:38 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-13

    Summary:
      added syslog-ng.txt generation to Makefile
    Revision:
      syslog-ng--mainline--2.0--patch-13

    
    

    modified files:
     ChangeLog doc/Makefile.am


2006-02-12 13:37:21 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-12

    Summary:
      fixed second fraction processing so that it actually shows up in output
    Revision:
      syslog-ng--mainline--2.0--patch-12

    	* src/afsocket.h: removed AFSOCKET_PROTO_RFC3164, it might be
    	readded later when multiple protocols will be added, but for now it
    	only clutters the code
    
    	* src/cfg-grammar.y (KW_TIMESTAMP): moved keep_timestamp processing
    	to the readers, logwriters always reformat the timestamp based on
    	the parsed value, keep_timestamp(no) overwrites the timestamp in the
    	message with the received time,
    	(KW_FRAC_DIGITS): added a way to specify second fraction precision,
    	it now defaults to zero, e.g. no fraction information is added,
    
    	* src/logmsg.c (log_stamp_format): added support for unix and full
    	timestamps, added frac_digits argument
    	(LogStamp): removed frac_present member, if the user requests second
    	fragments one is always generated, if this information is not
    	available 0 is assumed
    
    	* src/cfg.c (cfg_ts_format_value): added support for unix and full
    	timestamps,
    	(cfg_new): frac_digits is initialized to 0, keep_timestamp to TRUE
    
    	* src/logreader.c (log_reader_handle_line): overwrite the message
    	timestamp if keep_timestamp if FALSE,
    	(log_reader_options_init): use the global keep_timestamp setting is
    	one is not specified
    
    	* src/logwriter.c (log_writer_format_log): always regenerate the
    	timestamp if no template was specified, as there's no point in using
    	the original date in the message as it clutters logs and might
    	confuse receivers,
    	(LWOF_FIXED_STAMP): removed, this is the default behaviour which can
    	be overridden by using templates
    
    	* src/macros.c (log_macro_expand): use log_stamp_format for all
    	date/time formatting instead of open-coding them,
    	DATE uses the BSD timestamp, regardless of the value of ts_format
    
    	* src/test_template.c: fixed testprogram
    

    modified files:
     ChangeLog NEWS doc/reference/syslog-ng.xml src/affile.c
     src/afinet.c src/afsocket.c src/afsocket.h src/cfg-grammar.y
     src/cfg-lex.l src/cfg.c src/cfg.h src/logmsg.c src/logmsg.h
     src/logreader.c src/logreader.h src/logwriter.c
     src/logwriter.h src/macros.c src/macros.h src/templates.c
     src/templates.h tests/unit/test_template.c


2006-02-11 19:29:56 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-11

    Summary:
      readded HOST_FROM, FULLHOST_FROM, SOURCEIP macros, extended unit test program
    Revision:
      syslog-ng--mainline--2.0--patch-11

    	* src/gsockaddr.c (g_sockaddr_inet_check): new function, returns
    	TRUE if the specified address is GSockAddrInet
    
    	* src/logmsg.c (log_msg_parse): fixed timezone parsing in ISODATE
    	timestamps,
    	(log_msg_init): added host_from member,
    	(log_msg_free): free host_from
    
    	* src/macros.c (log_macro_expand): added FULLHOST_FROM, HOST_FROM,
    	SOURCEIP implementation, fixed DATE macros
    
    	* src/misc.c (resolve_hostname): instead of returning a newly
    	allocated GString, store the result in the one passed as parameter
    
    	* src/sgroup.c (log_source_group_queue): set host_from member in log message
    
    	* tests/unit/test_msgparse.c: fixed offset/timestamp value
    
    	* tests/unit/test_template.c: greatly extended to cover all possible
    	macros, resulting fixes are above :)

    modified files:
     ChangeLog NEWS src/gsockaddr.c src/gsockaddr.h src/logmsg.c
     src/logmsg.h src/macros.c src/macros.h src/misc.c src/misc.h
     src/sgroup.c tests/unit/test_msgparse.c
     tests/unit/test_template.c


2006-02-11 17:31:08 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-10

    Summary:
      fixed possible segmentation fault on SIGHUP
    Revision:
      syslog-ng--mainline--2.0--patch-10

    	* src/afsocket.c (afsocket_sc_set_owner): new function, changes all
    	references to a new AFSocketSourceDriver (this happens accross
    	SIGHUPs),
    	(afsocket_sd_set_listener_keep_alive): removed, there's no separate
    	LISTENER_KEEP_ALIVE setting,
    	(afsocket_sd_init): instead of simply changing the next-hop log-pipe
    	of connections call afsocket_sc_set_owner which changes less
    	explicit references
    
    	* src/cfg-grammar.y (yyparser_reset): new function, resets all
            'last_' variables as they are not referenced and might contain
            pointers to stale data
    
    	* src/logpipe.c (log_pipe_free_instance): function body moved to
    	log_pipe_unref to clear some clutter in backtraces and both
    	functions are only a couple of lines anyway
    
    	* src/logreader.c (log_reader_set_options): new function, allows the
    	caller to change the pointer to the options structure
    

    modified files:
     ChangeLog NEWS src/afinet.c src/afsocket.c src/afsocket.h
     src/afunix.c src/cfg-grammar.y src/cfg.c src/logpipe.c
     src/logreader.c src/logreader.h src/logsource.c
     src/logsource.h src/main.c


2006-02-11 17:22:06 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-9

    Summary:
      memtrace improvements
    Revision:
      syslog-ng--mainline--2.0--patch-9

    	* src/memtrace.c: added backtrace to add/delblock messages

    modified files:
     ChangeLog src/memtrace.c


2006-02-11 13:41:36 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-8

    Summary:
      added some more unit testcases for filter testing
    Revision:
      syslog-ng--mainline--2.0--patch-8

    
    

    modified files:
     ChangeLog tests/unit/test_filters.c


2006-02-11 13:07:54 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-7

    Summary:
      added "kernel" flag to log reader flags
    Revision:
      syslog-ng--mainline--2.0--patch-7

    2006-02-11  Balazs Scheidler <bazsi@balabit.hu>
    
    	* src/cfg-lex.l, src/cfg-grammar.y: added "kernel" keyword
    
    	* src/logmsg.c (log_msg_parse): default to kern.crit for kernel
    	messages
    
    	* src/macros.c: fixed PRI macro as it included the hostname as well

    modified files:
     ChangeLog NEWS doc/reference/syslog-ng.xml src/cfg-grammar.y
     src/cfg-lex.l src/logmsg.c src/logmsg.h src/logreader.c
     src/logreader.h src/macros.c


2006-02-11 12:44:37 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-6

    Summary:
      added PID macro and its documentation
    Revision:
      syslog-ng--mainline--2.0--patch-6

    	* src/macros.c (log_expand_macro): added support for PID
    
    
    

    modified files:
     ChangeLog NEWS doc/reference/syslog-ng.xml src/macros.c
     src/macros.h


2006-02-11 12:00:14 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-5

    Summary:
      added normalize_hostnames() option (fixes: #6294)
    Revision:
      syslog-ng--mainline--2.0--patch-5

    2006-02-11  Balazs Scheidler <bazsi@balabit.hu>
    
    	* src/cfg-lex.l, src/cfg-grammar.y: added normalize_hostnames
    	option
    
    	* src/sgroup.c: implement normalize_hostnames
    
    	* src/logmsg.c (log_msg_parse): removed STRICT check from RFC3339
    	timestamp parsing
    
    	* doc/reference/syslog-ng.xml: updated

    modified files:
     ChangeLog NEWS doc/reference/syslog-ng.xml src/cfg-grammar.y
     src/cfg-lex.l src/cfg.h src/logmsg.c src/misc.c src/misc.h
     src/sgroup.c src/sgroup.h


2006-02-11 10:57:43 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-4

    Summary:
      Added processed counters for source/destination groups and the log center (fixes: #5368)
    Revision:
      syslog-ng--mainline--2.0--patch-4

    
    	* src/affile.c (affile_dd_format_stats_name): readded this function
    	to generate a unique stats ID for the specific destination driver
    	instance,
    	(affile_dd_init): use NO_STATS for files only,
    	
    	* src/center.c (log_center_init): added received/queued counters,
    	(log_center_queue): increment counters
    
    	* src/sgroup.c, src/dgroup.c: added processed counters
    
    	* src/stats.c, src/stats.h: added SC_TYPE_PROCESSED, make sure that
    	counters are interpreted in their proper namespace,
    	(stats_unregister_counter): added missing "type" argument
    
    

    modified files:
     ChangeLog NEWS src/affile.c src/center.c src/center.h
     src/dgroup.c src/dgroup.h src/driver.c src/logwriter.c
     src/sgroup.c src/sgroup.h src/stats.c src/stats.h


2006-02-11 08:43:32 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-3

    Summary:
      added optional() parameter to pipe/unix drivers (fixes: #4999)
    Revision:
      syslog-ng--mainline--2.0--patch-3

    	* src/driver.h: added optional member (fixes: #4999)
    
    	* src/cfg-lex.l: added optional keyword (fixes: #4999)
    
    	* src/cfg-grammar.y: added optional keyword to pipe and unix domain
    	socket based source drivers (fixes: #4999)
    
    	* src/afsocket.c (afsocket_sd_init): do not fail if binding failed
    	and optional is TRUE (fixes: #4999)
    
    	* src/affile.c (affile_sd_init): do not fail if opening failed and
    	optional is TRUE (fixes: #4999)
    

    modified files:
     ChangeLog doc/reference/syslog-ng.xml src/affile.c
     src/afsocket.c src/cfg-grammar.y src/cfg-lex.l src/driver.h


2006-02-11 08:16:00 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-2

    Summary:
      implemented filter debugging (fixes: #3988)
    Revision:
      syslog-ng--mainline--2.0--patch-2

    
    	* src/filter.c (log_filter_rule_eval): new function, previously
    	rule->root was manipulated directly which was not nice, filter rule
    	debugging messages are put here (fixes: #3988),
    	(filter_expr_eval): uninlined, added debugging messages (fixes: #3988),
    	(filter_expr_free): uninlined
    	(*_new): set self->type to be used in log messages properly (fixes: #3988)
    
    

    modified files:
     ChangeLog src/center.c src/filter.c src/filter.h


2006-02-11 07:53:02 GMT	Balazs Scheidler <bazsi@balabit.hu>	patch-1

    Summary:
      integrated last pending patch from bazsi's archive, started new ChangeLog
    Revision:
      syslog-ng--mainline--2.0--patch-1

    
    	* tla archives were switched, syslog-ng now uses
    	devel@balabit.hu--other-1, the old ChangeLog file was archived as
    	ChangeLog.1
    
    	* integrated a last pending patch from the old archive to fix a
    	possible 64bit compatibility issue
    

    new files:
     .arch-ids/ChangeLog.1.id .arch-ids/ChangeLog.id ChangeLog
     ChangeLog.1

    removed files:
     .arch-ids/ChangeLog.id ChangeLog

    modified files:
     src/logwriter.c src/logwriter.h

    new patches:
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-86


2006-01-27 09:17:47 GMT	Attila SZALAY <sasa@balabit.hu>	base-0

    Summary:
      tag of bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-85
    Revision:
      syslog-ng--mainline--2.0--base-0

    (automatically generated log message)

    new patches:
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--base-0
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-1
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-2
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-3
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-4
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-5
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-6
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-7
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-8
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-9
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-10
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-11
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-12
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-13
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-14
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-15
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-16
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-17
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-18
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-19
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-20
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-21
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-22
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-23
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-24
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-25
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-26
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-27
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-28
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-29
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-30
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-31
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-32
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-33
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-34
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-35
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-36
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-37
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-38
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-39
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-40
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-41
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-42
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-43
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-44
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-45
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-46
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-47
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-48
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-49
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-50
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-51
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-52
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-53
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-54
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-55
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-56
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-57
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-58
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-59
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-60
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-61
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-62
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-63
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-64
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-65
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-66
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-67
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-68
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-69
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-70
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-71
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-72
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-73
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-74
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-75
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-76
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-77
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-78
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-79
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-80
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-81
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-82
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-83
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-84
     bazsi@balabit.hu--bazsi-1/syslog-ng--mainline--2.0--patch-85


