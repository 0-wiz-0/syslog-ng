`apphook`: the concept of hook run modes were introduced, adding support for
two modes: AHM_RUN_ONCE (the original behavior) and AHM_RUN_REPEAT (the new
behavior with the hook repeatedly called after registration).
